"use strict";(self.webpackChunksleact_ts_front=self.webpackChunksleact_ts_front||[]).push([[276],{92309:function(e,t,r){r.d(t,{Z:function(){return b}});var n=r(67294),a=r(66482),o=r(32034),i=(0,a.Z)("div",{target:"e298qi15"})({name:"ra6cyy",styles:"display:flex;width:100%;padding:20px;padding-top:0"}),l=(0,a.Z)("form",{target:"e298qi14"})({name:"33ihw2",styles:"color:rgb(29, 28, 29);font-size:15px;width:100%;border-radius:4px;border:1px solid rgb(29, 28, 29)"}),c=(0,a.Z)(o.r,{target:"e298qi13"})({name:"bka2jr",styles:"font-family:Slack-Lato,appleLogo,sans-serif;font-size:15px;padding:8px 9px;width:100%;& strong{background:skyblue;}& textarea{height:44px;padding:9px 10px!important;outline:none!important;border-radius:4px!important;resize:none!important;line-height:22px;border:none;}& ul{border:1px solid lightgray;max-height:200px;overflow-y:auto;padding:9px 10px;background:white;border-radius:4px;width:150px;}"}),s=(0,a.Z)("div",{target:"e298qi12"})({name:"13ie2qx",styles:"position:relative;background:rgb(248, 248, 248);height:41px;display:flex;border-top:1px solid rgb(221, 221, 221);align-items:center;border-bottom-left-radius:4px;border-bottom-right-radius:4px"}),u=(0,a.Z)("button",{target:"e298qi11"})({name:"xrrdm2",styles:"position:absolute;right:5px;top:5px"}),p=(0,a.Z)("button",{target:"e298qi10"})("padding:4px 20px;background:transparent;border:none;display:flex;align-items:center;color:rgb(28, 29, 28);width:100%;& img{margin-right:5px;}",(function(e){return e.focus&&"\n    background: #1264a3;\n    color: white;\n  "}),";"),d=r(3682),m=r(8100),f=r(83564),g=r(5977),h=r(66182),x=r.n(h),b=function(e){var t=e.chat,r=e.onSubmitForm,a=e.onChangeChat,h=e.placeholder,b=(0,g.UO)().workspace,y=(0,m.ZP)("http://localhost:3095/api/users",f.Z),v=y.data,k=(y.error,y.mutate,(0,m.ZP)(v?"http://localhost:3095/api/workspaces/".concat(b,"/members"):null,f.Z).data),E=(0,n.useRef)(null);(0,n.useEffect)((function(){E.current&&(0,d.Z)(E.current)}),[]);var w=(0,n.useCallback)((function(e){"Enter"===e.key&&(e.preventDefault(),e.shiftKey||(e.preventDefault(),r(e)))}),[r]),Z=(0,n.useCallback)((function(e,t,r,a,o){if(k)return n.createElement(p,{focus:o},n.createElement("img",{src:x().url(k[a].email,{s:"20px",d:"retro"}),alt:k[a].nickname}),n.createElement("span",null,r))}),[k]);return n.createElement(i,null,n.createElement(l,{onSubmit:r},n.createElement(c,{value:t,onChange:a,onKeyDown:w,id:"edit-chat",placeholder:h,inputRef:E,allowSuggestionsAboveCursor:!0},n.createElement(o.p,{appendSpaceOnAdd:!0,trigger:"@",data:(null==k?void 0:k.map((function(e){return{id:e.id,display:e.nickname}})))||[],renderSuggestion:Z})),n.createElement(s,null,n.createElement(u,null,"보내기"))))}},32545:function(e,t,r){r.d(t,{Z:function(){return v}});var n=r(66482),a=(0,n.Z)("div",{target:"e1jqbxcr2"})({name:"1op36e9",styles:"width:100%;display:flex;flex:1"}),o=(0,n.Z)("section",{target:"e1jqbxcr1"})({name:"10zp55f",styles:"margin-top:20px;border-top:1px solid #eee"}),i=(0,n.Z)("div",{target:"e1jqbxcr0"})({name:"16cu5ak",styles:"display:flex;justify-content:center;flex:1;width:100%;position:sticky;top:14px;& button{font-weight:bold;font-size:13px;height:28px;line-height:27px;padding:0 16px;z-index:2;--saf-0:rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);box-shadow:0 0 0 1px var(--saf-0),0 1px 3px 0 rgba(0, 0, 0, 0.08);border-radius:24px;position:relative;top:-13px;background:white;border:none;outline:none;}"}),l=r(67294),c=(0,n.Z)("div",{target:"ec89ap00"})({name:"2yhi1c",styles:"display:flex;padding:8px 20px;&:hover{background:#eee;}& .chat-img{display:flex;width:36px;margin-right:8px;& img{width:36px;height:36px;}}& .chat-text{display:flex;flex-wrap:wrap;flex:1;& p{flex:0 0 100%;margin:0;}}& .chat-user{display:flex;flex:0 0 100%;align-items:center;&>b{margin-right:5px;}&>span{font-size:12px;}}& a{text-decoration:none;color:deepskyblue;}"}),s=r(66182),u=r.n(s),p=r(27484),d=r.n(p),m=r(38817),f=r(73727),g=r(5977),h=function(e){var t=e.data,r="Sender"in t?t.Sender:t.User,n=(0,g.UO)().workspace,a=(0,l.useMemo)((function(){return t.content.startsWith("uploads\\")||t.content.startsWith("uploads/")?l.createElement("img",{src:"http://localhost:3095/".concat(t.content),style:{maxHeight:200}}):(0,m.Z)({input:t.content,pattern:/@\[(.+?)]\((\d+?)\)|\n/g,decorator:function(e,t){var r=e.match(/@\[(.+?)]\((\d+?)\)/);return r?l.createElement(f.rU,{key:e+t,to:"/workspace/".concat(n,"/dm/").concat(r[2])},"@",r[1]):l.createElement("br",{key:t})}})}),[n,t.content]);return l.createElement(c,null,l.createElement("div",{className:"chat-img"},l.createElement("img",{src:u().url(r.email,{s:"36px",d:"retro"}),alt:r.nickname})),l.createElement("div",{className:"chat-text"},l.createElement("div",{className:"chat-user"},l.createElement("b",null,r.nickname),l.createElement("span",null,d()(t.createdAt).format(":h:mm A"))),l.createElement("p",null,a)))},x=(0,l.memo)(h),b=r(86658);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t=e.scrollbarRef,r=e.isReachingEnd,n=e.isEmpty,c=e.chatData,s=e.setSize,u=(0,l.useCallback)((function(e){0!==e.scrollTop||r||n||s((function(e){return e+1})).then((function(){var r,n;null===(r=t.current)||void 0===r||r.scrollTop((null===(n=t.current)||void 0===n?void 0:n.getScrollHeight())-e.scrollHeight)}))}),[t]);return l.createElement(a,null,l.createElement(b.$B,{autoHide:!0,ref:t,onScrollFrame:u},Object.entries(c).map((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=n[0],c=n[1];return l.createElement(o,{className:"section-".concat(a),key:a},l.createElement(i,null,l.createElement("button",null,a)),c.map((function(e){return l.createElement(x,{key:e.id,data:e})})))}))))}},6501:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(27484),a=r.n(n);function o(e){var t={};return e.forEach((function(e){var r=a()(e.createdAt).format("YYYY-MM-DD");Array.isArray(t[r])?t[r].push(e):t[r]=[e]})),t}}}]);