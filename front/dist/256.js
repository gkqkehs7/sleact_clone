"use strict";(self.webpackChunksleact_ts_front=self.webpackChunksleact_ts_front||[]).push([[256],{92309:(e,n,t)=>{t.d(n,{Z:()=>Z});var r,a,o,l,i,c,s=t(67294),u=t(76741),p=t(32034);function f(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var d=u.Z.div(r||(r=f(["\n  display: flex;\n  width: 100%;\n  padding: 20px;\n  padding-top: 0;\n"]))),m=u.Z.form(a||(a=f(["\n  color: rgb(29, 28, 29);\n  font-size: 15px;\n  width: 100%;\n  border-radius: 4px;\n  border: 1px solid rgb(29, 28, 29);\n"]))),h=(0,u.Z)(p.r)(o||(o=f(["\n  font-family: Slack-Lato, appleLogo, sans-serif;\n  font-size: 15px;\n  padding: 8px 9px;\n  width: 100%;\n  & strong {\n    background: skyblue;\n  }\n  & textarea {\n    height: 44px;\n    padding: 9px 10px !important;\n    outline: none !important;\n    border-radius: 4px !important;\n    resize: none !important;\n    line-height: 22px;\n    border: none;\n  }\n  & ul {\n    border: 1px solid lightgray;\n    max-height: 200px;\n    overflow-y: auto;\n    padding: 9px 10px;\n    background: white;\n    border-radius: 4px;\n    width: 150px;\n  }\n"]))),g=u.Z.div(l||(l=f(["\n  position: relative;\n  background: rgb(248, 248, 248);\n  height: 41px;\n  display: flex;\n  border-top: 1px solid rgb(221, 221, 221);\n  align-items: center;\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n"]))),b=u.Z.button(i||(i=f(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n"]))),x=u.Z.button(c||(c=f(["\n  padding: 4px 20px;\n  background: transparent;\n  border: none;\n  display: flex;\n  align-items: center;\n  color: rgb(28, 29, 28);\n  width: 100%;\n  & img {\n    margin-right: 5px;\n  }\n  ",";\n"])),(function(e){return e.focus&&"\n    background: #1264a3;\n    color: white;\n  "})),v=t(3682),y=t(8100),w=t(83564),k=t(5977),E=t(66182),S=t.n(E);const Z=function(e){var n=e.chat,t=e.onSubmitForm,r=e.onChangeChat,a=e.placeholder,o=(0,k.UO)().workspace,l=(0,y.ZP)("http://localhost:3095/api/users",w.Z),i=l.data,c=(l.error,l.mutate,(0,y.ZP)(i?"http://localhost:3095/api/workspaces/".concat(o,"/members"):null,w.Z).data),u=(0,s.useRef)(null);(0,s.useEffect)((function(){u.current&&(0,v.Z)(u.current)}),[]);var f=(0,s.useCallback)((function(e){"Enter"===e.key&&(e.preventDefault(),e.shiftKey||(e.preventDefault(),t(e)))}),[t]),E=(0,s.useCallback)((function(e,n,t,r,a){if(c)return s.createElement(x,{focus:a},s.createElement("img",{src:S().url(c[r].email,{s:"20px",d:"retro"}),alt:c[r].nickname}),s.createElement("span",null,t))}),[c]);return s.createElement(d,null,s.createElement(m,{onSubmit:t},s.createElement(h,{value:n,onChange:r,onKeyDown:f,id:"edit-chat",placeholder:a,inputRef:u,allowSuggestionsAboveCursor:!0},s.createElement(p.p,{appendSpaceOnAdd:!0,trigger:"@",data:(null==c?void 0:c.map((function(e){return{id:e.id,display:e.nickname}})))||[],renderSuggestion:E})),s.createElement(g,null,s.createElement(b,null,"보내기"))))}},32545:(e,n,t)=>{t.d(n,{Z:()=>A});var r,a,o,l=t(76741);function i(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var c,s,u,p=l.Z.div(r||(r=i(["\n  width: 100%;\n  display: flex;\n  flex: 1;\n"]))),f=l.Z.section(a||(a=i(["\n  margin-top: 20px;\n  border-top: 1px solid #eee;\n"]))),d=l.Z.div(o||(o=i(["\n  display: flex;\n  justify-content: center;\n  flex: 1;\n  width: 100%;\n  position: sticky;\n  top: 14px;\n  & button {\n    font-weight: bold;\n    font-size: 13px;\n    height: 28px;\n    line-height: 27px;\n    padding: 0 16px;\n    z-index: 2;\n    --saf-0: rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);\n    box-shadow: 0 0 0 1px var(--saf-0), 0 1px 3px 0 rgba(0, 0, 0, 0.08);\n    border-radius: 24px;\n    position: relative;\n    top: -13px;\n    background: white;\n    border: none;\n    outline: none;\n  }\n"]))),m=t(67294),h=l.Z.div(c||(s=["\n  display: flex;\n  padding: 8px 20px;\n  &:hover {\n    background: #eee;\n  }\n  & .chat-img {\n    display: flex;\n    width: 36px;\n    margin-right: 8px;\n    & img {\n      width: 36px;\n      height: 36px;\n    }\n  }\n  & .chat-text {\n    display: flex;\n    flex-wrap: wrap;\n    flex: 1;\n    & p {\n      flex: 0 0 100%;\n      margin: 0;\n    }\n  }\n  & .chat-user {\n    display: flex;\n    flex: 0 0 100%;\n    align-items: center;\n    & > b {\n      margin-right: 5px;\n    }\n    & > span {\n      font-size: 12px;\n    }\n  }\n  & a {\n    text-decoration: none;\n    color: deepskyblue;\n  }\n"],u||(u=s.slice(0)),c=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(u)}})))),g=t(66182),b=t.n(g),x=t(27484),v=t.n(x),y=t(38817),w=t(73727),k=t(5977),E=function(e){var n=e.data,t="Sender"in n?n.Sender:n.User,r=(0,k.UO)().workspace,a=(0,m.useMemo)((function(){return n.content.startsWith("uploads\\")||n.content.startsWith("uploads/")?m.createElement("img",{src:"http://localhost:3095/".concat(n.content),style:{maxHeight:200}}):(0,y.Z)({input:n.content,pattern:/@\[(.+?)]\((\d+?)\)|\n/g,decorator:function(e,n){var t=e.match(/@\[(.+?)]\((\d+?)\)/);return t?m.createElement(w.rU,{key:e+n,to:"/workspace/".concat(r,"/dm/").concat(t[2])},"@",t[1]):m.createElement("br",{key:n})}})}),[r,n.content]);return m.createElement(h,null,m.createElement("div",{className:"chat-img"},m.createElement("img",{src:b().url(t.email,{s:"36px",d:"retro"}),alt:t.nickname})),m.createElement("div",{className:"chat-text"},m.createElement("div",{className:"chat-user"},m.createElement("b",null,t.nickname),m.createElement("span",null,v()(n.createdAt).format(":h:mm A"))),m.createElement("p",null,a)))};const S=(0,m.memo)(E);var Z=t(86658);function C(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}const A=function(e){var n=e.scrollbarRef,t=e.isReachingEnd,r=e.isEmpty,a=e.chatData,o=e.setSize,l=(0,m.useCallback)((function(e){0!==e.scrollTop||t||r||o((function(e){return e+1})).then((function(){var t,r;null===(t=n.current)||void 0===t||t.scrollTop((null===(r=n.current)||void 0===r?void 0:r.getScrollHeight())-e.scrollHeight)}))}),[n]);return m.createElement(p,null,m.createElement(Z.$B,{autoHide:!0,ref:n,onScrollFrame:l},Object.entries(a).map((function(e){var n,t,r=(t=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],l=!0,i=!1;try{for(t=t.call(e);!(l=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==t.return||t.return()}finally{if(i)throw a}}return o}}(n,t)||function(e,n){if(e){if("string"==typeof e)return C(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?C(e,n):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],o=r[1];return m.createElement(f,{className:"section-".concat(a),key:a},m.createElement(d,null,m.createElement("button",null,a)),o.map((function(e){return m.createElement(S,{key:e.id,data:e})})))}))))}},65256:(e,n,t)=>{t.r(n),t.d(n,{default:()=>O});var r,a,o,l=t(67294),i=t(5977),c=t(76741);function s(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var u=c.Z.div(r||(r=s(["\n  display: flex;\n  flex-wrap: wrap;\n  height: calc(100vh - 38px);\n  flex-flow: column;\n  position: relative;\n"]))),p=c.Z.header(a||(a=s(["\n  height: 64px;\n  display: flex;\n  width: 100%;\n  --saf-0: rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);\n  box-shadow: 0 1px 0 var(--saf-0);\n  padding: 20px 16px 20px 20px;\n  font-weight: bold;\n  align-items: center;\n  & img {\n    margin-right: 5px;\n  }\n"]))),f=c.Z.div(o||(o=s(["\n  position: absolute;\n  top: 64px;\n  left: 0;\n  width: 100%;\n  height: calc(100% - 64px);\n  background: white;\n  opacity: 0.7;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 40px;\n"]))),d=t(8100),m=t(44593),h=t(83564),g=t(92309),b=t(32545),x=t(38678),v=t(9669),y=t.n(v),w=t(6501),k=t(32951),E=t(79250),S=t(63750),Z=t(39249);function C(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],l=!0,i=!1;try{for(t=t.call(e);!(l=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==t.return||t.return()}finally{if(i)throw a}}return o}}(e,n)||A(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,n){if(e){if("string"==typeof e)return j(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?j(e,n):void 0}}function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}const O=function(){var e,n,t,r=(0,i.UO)(),a=r.workspace,o=r.channel,c=(0,d.ZP)("http://localhost:3095/api/users",h.Z).data,s=(0,d.ZP)("http://localhost:3095/api/workspaces/".concat(a,"/channels"),h.Z).data,v=(0,m.ZP)((function(e){return"http://localhost:3095/api/workspaces/".concat(a,"/channels/").concat(o,"/chats?perPage=20&page=").concat(e+1)}),h.Z),O=v.data,T=v.mutate,z=v.setSize;console.log(O);var D=(0,d.ZP)(c?"http://localhost:3095/api/workspaces/".concat(a,"/channels/").concat(o,"/members"):null,h.Z).data,I=C((0,k.Z)(a),1)[0],P=C((0,x.Z)(""),3),R=P[0],M=P[1],_=P[2],U=C((0,l.useState)(!1),2),F=U[0],Y=U[1],B=C((0,l.useState)(!1),2),H=B[0],N=B[1],L=(0,l.useRef)(null),$=0===(null==O||null===(e=O[0])||void 0===e?void 0:e.length),K=$||O&&(null===(n=O[O.length-1])||void 0===n?void 0:n.length)<20,W=(0,l.useCallback)((function(e){e.preventDefault(),null!=R&&R.trim()&&y().post("http://localhost:3095/api/workspaces/".concat(a,"/channels/").concat(o,"/chats"),{content:R}).then((function(){T(),_(""),localStorage.setItem("".concat(a,"-").concat(o),(new Date).getTime().toString()),setTimeout((function(){var e;null===(e=L.current)||void 0===e||e.scrollToBottom()}),100)})).catch(console.error)}),[R]);(0,l.useEffect)((function(){localStorage.setItem("".concat(a,"-").concat(o),(new Date).getTime().toString())}),[a,o]);var q=(0,l.useCallback)((function(e){T((function(n){return null==n||n[0].push(e),localStorage.setItem("".concat(a,"-").concat(o),(new Date).getTime().toString()),n}),!1).then((function(){Z.Am.success("새 메시지가 도착했습니다.",{onClick:function(){var e;null===(e=L.current)||void 0===e||e.scrollToBottom()},closeOnClick:!0})}))}),[c,T]);(0,l.useEffect)((function(){return null==I||I.on("chat",q),function(){null==I||I.off("chat",q)}}),[I,q]),(0,l.useEffect)((function(){var e;1===(null==O?void 0:O.length)&&(null===(e=L.current)||void 0===e||e.scrollToBottom())}),[O]);var G,J=(0,w.Z)(O?(t=[]).concat.apply(t,(G=O,function(e){if(Array.isArray(e))return j(e)}(G)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(G)||A(G)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).reverse():[]),Q=(0,l.useCallback)((function(){Y(!0)}),[]),V=(0,l.useCallback)((function(){Y(!1)}),[]),X=(0,l.useCallback)((function(e){e.preventDefault();var n=new FormData;if(e.dataTransfer.items){for(var t=0;t<e.dataTransfer.items.length;t++)if("file"===e.dataTransfer.items[t].kind){var r=e.dataTransfer.items[t].getAsFile();n.append("image",r)}}else for(var l=0;l<e.dataTransfer.files.length;l++)n.append("image",e.dataTransfer.files[l]);y().post("http://localhost:3095/api/workspaces/".concat(a,"/channels/").concat(o,"/images"),n).then((function(){N(!1),localStorage.setItem("".concat(a,"-").concat(o),(new Date).getTime().toString())}))}),[a,o]),ee=(0,l.useCallback)((function(e){console.log("드래그중"),e.preventDefault(),N(!0)}),[]);return s&&c?l.createElement(u,{onDragOver:ee,onDrop:X},l.createElement(p,null,l.createElement("span",null,"#",o),l.createElement("div",{style:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"center"}},l.createElement("span",null,D&&D[0].Members.length),l.createElement(S.RYR,{onClick:Q,style:{marginLeft:"5px"}}))),l.createElement(b.Z,{chatData:J,scrollbarRef:L,isReachingEnd:K,isEmpty:$,setSize:z}),l.createElement(g.Z,{chat:R,onChangeChat:M,onSubmitForm:W}),l.createElement(E.Z,{show:F,onCloseModal:V,setShowInviteChannelModal:Y}),l.createElement(Z.Ix,{position:"bottom-center",limit:1}),H&&l.createElement(f,null,"업로드!")):null}},6501:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(27484),a=t.n(r);function o(e){var n={};return e.forEach((function(e){var t=a()(e.createdAt).format("YYYY-MM-DD");Array.isArray(n[t])?n[t].push(e):n[t]=[e]})),n}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Qy9DaEQsR0FBZSxnQkFBQ2hCLEVBQUQsY0ExQlgsTyx3REN6SkksU0FBU3FDLEVBQW1DNEIsR0FDekQsSUFBTUMsRUFBbUMsR0FTekMsT0FSQUQsRUFBU0UsU0FBUSxTQUFDbEssR0FDaEIsSUFBTW1LLEVBQVk3RixHQUFBQSxDQUFNdEUsRUFBS3VFLFdBQVdDLE9BQU8sY0FDM0M0RixNQUFNQyxRQUFRSixFQUFTRSxJQUN6QkYsRUFBU0UsR0FBV3RDLEtBQUs3SCxHQUV6QmlLLEVBQVNFLEdBQWEsQ0FBQ25LLE1BR3BCaUsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYXRCb3gvc3R5bGVzLnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYXRCb3gvaW5kZXgudHN4Iiwid2VicGFjazovL3NsZWFjdC10cy1mcm9udC8uL2NvbXBvbmVudHMvQ2hhdExpc3Qvc3R5bGVzLnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYXQvc3R5bGVzLnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYXQvaW5kZXgudHN4Iiwid2VicGFjazovL3NsZWFjdC10cy1mcm9udC8uL2NvbXBvbmVudHMvQ2hhdExpc3QvaW5kZXgudHN4Iiwid2VicGFjazovL3NsZWFjdC10cy1mcm9udC8uL3BhZ2VzL0NoYW5uZWwvc3R5bGVzLnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9wYWdlcy9DaGFubmVsL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi91dGlscy9tYWtlU2VjdGlvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuaW1wb3J0IHsgTWVudGlvbnNJbnB1dCB9IGZyb20gJ3JlYWN0LW1lbnRpb25zJztcblxuZXhwb3J0IGNvbnN0IENoYXRBcmVhID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgd2lkdGg6IDEwMCU7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIHBhZGRpbmctdG9wOiAwO1xuYDtcblxuZXhwb3J0IGNvbnN0IEZvcm0gPSBzdHlsZWQuZm9ybWBcbiAgY29sb3I6IHJnYigyOSwgMjgsIDI5KTtcbiAgZm9udC1zaXplOiAxNXB4O1xuICB3aWR0aDogMTAwJTtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBib3JkZXI6IDFweCBzb2xpZCByZ2IoMjksIDI4LCAyOSk7XG5gO1xuXG5leHBvcnQgY29uc3QgTWVudGlvbnNUZXh0YXJlYSA9IHN0eWxlZChNZW50aW9uc0lucHV0KWBcbiAgZm9udC1mYW1pbHk6IFNsYWNrLUxhdG8sIGFwcGxlTG9nbywgc2Fucy1zZXJpZjtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBwYWRkaW5nOiA4cHggOXB4O1xuICB3aWR0aDogMTAwJTtcbiAgJiBzdHJvbmcge1xuICAgIGJhY2tncm91bmQ6IHNreWJsdWU7XG4gIH1cbiAgJiB0ZXh0YXJlYSB7XG4gICAgaGVpZ2h0OiA0NHB4O1xuICAgIHBhZGRpbmc6IDlweCAxMHB4ICFpbXBvcnRhbnQ7XG4gICAgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50O1xuICAgIGJvcmRlci1yYWRpdXM6IDRweCAhaW1wb3J0YW50O1xuICAgIHJlc2l6ZTogbm9uZSAhaW1wb3J0YW50O1xuICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgfVxuICAmIHVsIHtcbiAgICBib3JkZXI6IDFweCBzb2xpZCBsaWdodGdyYXk7XG4gICAgbWF4LWhlaWdodDogMjAwcHg7XG4gICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICBwYWRkaW5nOiA5cHggMTBweDtcbiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgd2lkdGg6IDE1MHB4O1xuICB9XG5gO1xuXG5leHBvcnQgY29uc3QgVG9vbGJveCA9IHN0eWxlZC5kaXZgXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYmFja2dyb3VuZDogcmdiKDI0OCwgMjQ4LCAyNDgpO1xuICBoZWlnaHQ6IDQxcHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2IoMjIxLCAyMjEsIDIyMSk7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDtcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDRweDtcbmA7XG5cbmV4cG9ydCBjb25zdCBTZW5kQnV0dG9uID0gc3R5bGVkLmJ1dHRvbmBcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogNXB4O1xuICB0b3A6IDVweDtcbmA7XG5cbmV4cG9ydCBjb25zdCBFYWNoTWVudGlvbiA9IHN0eWxlZC5idXR0b248eyBmb2N1czogYm9vbGVhbiB9PmBcbiAgcGFkZGluZzogNHB4IDIwcHg7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBib3JkZXI6IG5vbmU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGNvbG9yOiByZ2IoMjgsIDI5LCAyOCk7XG4gIHdpZHRoOiAxMDAlO1xuICAmIGltZyB7XG4gICAgbWFyZ2luLXJpZ2h0OiA1cHg7XG4gIH1cbiAgJHsoeyBmb2N1cyB9KSA9PlxuICAgIGZvY3VzICYmXG4gICAgYFxuICAgIGJhY2tncm91bmQ6ICMxMjY0YTM7XG4gICAgY29sb3I6IHdoaXRlO1xuICBgfTtcbmA7XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCBWRkMgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDaGF0QXJlYSwgRWFjaE1lbnRpb24sIEZvcm0sIE1lbnRpb25zVGV4dGFyZWEsIFNlbmRCdXR0b24sIFRvb2xib3ggfSBmcm9tICcuL3N0eWxlcyc7XG5pbXBvcnQgYXV0b3NpemUgZnJvbSAnYXV0b3NpemUnO1xuaW1wb3J0IHVzZVNXUiBmcm9tICdzd3InO1xuaW1wb3J0IHsgSVVzZXIgfSBmcm9tICdAdHlwaW5ncy9kYic7XG5pbXBvcnQgZmV0Y2hlciBmcm9tICdAdXRpbHMvZmV0Y2hlcic7XG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xuaW1wb3J0IHsgTWVudGlvbiwgU3VnZ2VzdGlvbkRhdGFJdGVtIH0gZnJvbSAncmVhY3QtbWVudGlvbnMnO1xuaW1wb3J0IGdyYXZhdGFyIGZyb20gJ2dyYXZhdGFyJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgY2hhdDogc3RyaW5nO1xuICBvblN1Ym1pdEZvcm06IChlOiBhbnkpID0+IHZvaWQ7XG4gIG9uQ2hhbmdlQ2hhdDogKGU6IGFueSkgPT4gdm9pZDtcbiAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG59XG5jb25zdCBDaGF0Qm94OiBWRkM8UHJvcHM+ID0gKHsgY2hhdCwgb25TdWJtaXRGb3JtLCBvbkNoYW5nZUNoYXQsIHBsYWNlaG9sZGVyIH0pID0+IHtcbiAgLy8g6rO17Ya17KCB7Jy866GcIOyTsOydtOuKlCBjb21wb25lbnTrk6TsnYAg6rCZ7J20IOyCrOyaqe2VtOykmOyVvCDtlZjquLAg65WM66y47JeQIG9uU3VibWl0Rm9ybeqwmeydgOqxsOuKlCBwcm9wc+uhnCDsoITri6xcbiAgY29uc3QgeyB3b3Jrc3BhY2UgfSA9IHVzZVBhcmFtczx7IHdvcmtzcGFjZTogc3RyaW5nIH0+KCk7XG4gIGNvbnN0IHsgZGF0YTogdXNlckRhdGEsIGVycm9yLCBtdXRhdGUgfSA9IHVzZVNXUjxJVXNlciB8IGZhbHNlPignaHR0cDovL2xvY2FsaG9zdDozMDk1L2FwaS91c2VycycsIGZldGNoZXIpO1xuICBjb25zdCB7IGRhdGE6IG1lbWJlckRhdGEgfSA9IHVzZVNXUjxJVXNlcltdPihcbiAgICB1c2VyRGF0YSA/IGBodHRwOi8vbG9jYWxob3N0OjMwOTUvYXBpL3dvcmtzcGFjZXMvJHt3b3Jrc3BhY2V9L21lbWJlcnNgIDogbnVsbCxcbiAgICBmZXRjaGVyLFxuICApO1xuXG4gIGNvbnN0IHRleHRhcmVhUmVmID0gdXNlUmVmPEhUTUxUZXh0QXJlYUVsZW1lbnQ+KG51bGwpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0ZXh0YXJlYVJlZi5jdXJyZW50KSB7XG4gICAgICBhdXRvc2l6ZSh0ZXh0YXJlYVJlZi5jdXJyZW50KTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBvbktleWRvd25DaGF0ID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICghZS5zaGlmdEtleSkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBvblN1Ym1pdEZvcm0oZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIFtvblN1Ym1pdEZvcm1dLFxuICApO1xuXG4gIGNvbnN0IHJlbmRlclN1Z2dlc3Rpb24gPSB1c2VDYWxsYmFjayhcbiAgICAoXG4gICAgICBzdWdnZXN0aW9uOiBTdWdnZXN0aW9uRGF0YUl0ZW0sXG4gICAgICBzZWFyY2g6IHN0cmluZyxcbiAgICAgIGhpZ2hsaWdodGVkRGlzcGxheTogUmVhY3QuUmVhY3ROb2RlLFxuICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgIGZvY3VzOiBib29sZWFuLFxuICAgICk6IFJlYWN0LlJlYWN0Tm9kZSA9PiB7XG4gICAgICBpZiAoIW1lbWJlckRhdGEpIHJldHVybjtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxFYWNoTWVudGlvbiBmb2N1cz17Zm9jdXN9PlxuICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgIHNyYz17Z3JhdmF0YXIudXJsKG1lbWJlckRhdGFbaW5kZXhdLmVtYWlsLCB7IHM6ICcyMHB4JywgZDogJ3JldHJvJyB9KX1cbiAgICAgICAgICAgIGFsdD17bWVtYmVyRGF0YVtpbmRleF0ubmlja25hbWV9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8c3Bhbj57aGlnaGxpZ2h0ZWREaXNwbGF5fTwvc3Bhbj5cbiAgICAgICAgPC9FYWNoTWVudGlvbj5cbiAgICAgICk7XG4gICAgfSxcbiAgICBbbWVtYmVyRGF0YV0sXG4gICk7XG5cbiAgcmV0dXJuIChcbiAgICA8Q2hhdEFyZWE+XG4gICAgICA8Rm9ybSBvblN1Ym1pdD17b25TdWJtaXRGb3JtfT5cbiAgICAgICAgPE1lbnRpb25zVGV4dGFyZWFcbiAgICAgICAgICB2YWx1ZT17Y2hhdH1cbiAgICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2VDaGF0fVxuICAgICAgICAgIG9uS2V5RG93bj17b25LZXlkb3duQ2hhdH1cbiAgICAgICAgICBpZD1cImVkaXQtY2hhdFwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxuICAgICAgICAgIGlucHV0UmVmPXt0ZXh0YXJlYVJlZn1cbiAgICAgICAgICBhbGxvd1N1Z2dlc3Rpb25zQWJvdmVDdXJzb3JcbiAgICAgICAgPlxuICAgICAgICAgIDxNZW50aW9uXG4gICAgICAgICAgICBhcHBlbmRTcGFjZU9uQWRkXG4gICAgICAgICAgICB0cmlnZ2VyPVwiQFwiXG4gICAgICAgICAgICBkYXRhPXttZW1iZXJEYXRhPy5tYXAoKHYpID0+ICh7IGlkOiB2LmlkLCBkaXNwbGF5OiB2Lm5pY2tuYW1lIH0pKSB8fCBbXX1cbiAgICAgICAgICAgIHJlbmRlclN1Z2dlc3Rpb249e3JlbmRlclN1Z2dlc3Rpb259XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9NZW50aW9uc1RleHRhcmVhPlxuICAgICAgICA8VG9vbGJveD5cbiAgICAgICAgICA8U2VuZEJ1dHRvbj7rs7TrgrTquLA8L1NlbmRCdXR0b24+XG4gICAgICAgIDwvVG9vbGJveD5cbiAgICAgIDwvRm9ybT5cbiAgICA8L0NoYXRBcmVhPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2hhdEJveDtcbiIsImltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJztcblxuZXhwb3J0IGNvbnN0IENoYXRab25lID0gc3R5bGVkLmRpdmBcbiAgd2lkdGg6IDEwMCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IDE7XG5gO1xuXG5leHBvcnQgY29uc3QgU2VjdGlvbiA9IHN0eWxlZC5zZWN0aW9uYFxuICBtYXJnaW4tdG9wOiAyMHB4O1xuICBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTtcbmA7XG5cbmV4cG9ydCBjb25zdCBTdGlja3lIZWFkZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZmxleDogMTtcbiAgd2lkdGg6IDEwMCU7XG4gIHBvc2l0aW9uOiBzdGlja3k7XG4gIHRvcDogMTRweDtcbiAgJiBidXR0b24ge1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICBoZWlnaHQ6IDI4cHg7XG4gICAgbGluZS1oZWlnaHQ6IDI3cHg7XG4gICAgcGFkZGluZzogMCAxNnB4O1xuICAgIHotaW5kZXg6IDI7XG4gICAgLS1zYWYtMDogcmdiYSh2YXIoLS1za19mb3JlZ3JvdW5kX2xvdywgMjksIDI4LCAyOSksIDAuMTMpO1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1zYWYtMCksIDAgMXB4IDNweCAwIHJnYmEoMCwgMCwgMCwgMC4wOCk7XG4gICAgYm9yZGVyLXJhZGl1czogMjRweDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgdG9wOiAtMTNweDtcbiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgb3V0bGluZTogbm9uZTtcbiAgfVxuYDtcbiIsImltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJztcblxuZXhwb3J0IGNvbnN0IENoYXRXcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgcGFkZGluZzogOHB4IDIwcHg7XG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6ICNlZWU7XG4gIH1cbiAgJiAuY2hhdC1pbWcge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgd2lkdGg6IDM2cHg7XG4gICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gICAgJiBpbWcge1xuICAgICAgd2lkdGg6IDM2cHg7XG4gICAgICBoZWlnaHQ6IDM2cHg7XG4gICAgfVxuICB9XG4gICYgLmNoYXQtdGV4dCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgZmxleDogMTtcbiAgICAmIHAge1xuICAgICAgZmxleDogMCAwIDEwMCU7XG4gICAgICBtYXJnaW46IDA7XG4gICAgfVxuICB9XG4gICYgLmNoYXQtdXNlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4OiAwIDAgMTAwJTtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICYgPiBiIHtcbiAgICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICAgIH1cbiAgICAmID4gc3BhbiB7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgfVxuICB9XG4gICYgYSB7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgIGNvbG9yOiBkZWVwc2t5Ymx1ZTtcbiAgfVxuYDtcbiIsImltcG9ydCB7IElETSwgSUNoYXQsIElVc2VyIH0gZnJvbSAnQHR5cGluZ3MvZGInO1xuaW1wb3J0IFJlYWN0LCB7IFZGQywgdXNlTWVtbywgbWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IENoYXRXcmFwcGVyIH0gZnJvbSAnLi9zdHlsZXMnO1xuaW1wb3J0IGdyYXZhdGFyIGZyb20gJ2dyYXZhdGFyJztcbmltcG9ydCBkYXlqcyBmcm9tICdkYXlqcyc7XG5pbXBvcnQgcmVnZXhpZnlTdHJpbmcgZnJvbSAncmVnZXhpZnktc3RyaW5nJztcbmltcG9ydCB7IExpbmssIHVzZVBhcmFtcyB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBkYXRhOiBJRE0gfCBJQ2hhdDtcbn1cbmNvbnN0IENoYXQ6IFZGQzxQcm9wcz4gPSAoeyBkYXRhIH0pID0+IHtcbiAgY29uc3QgdXNlcjogSVVzZXIgPSAnU2VuZGVyJyBpbiBkYXRhID8gZGF0YS5TZW5kZXIgOiBkYXRhLlVzZXI7XG4gIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB1c2VQYXJhbXM8eyB3b3Jrc3BhY2U6IHN0cmluZyB9PigpO1xuXG4gIGNvbnN0IHJlc3VsdCA9IHVzZU1lbW88KHN0cmluZyB8IEpTWC5FbGVtZW50KVtdIHwgSlNYLkVsZW1lbnQ+KFxuICAgICgpID0+XG4gICAgICBkYXRhLmNvbnRlbnQuc3RhcnRzV2l0aCgndXBsb2Fkc1xcXFwnKSB8fCBkYXRhLmNvbnRlbnQuc3RhcnRzV2l0aCgndXBsb2Fkcy8nKSA/IChcbiAgICAgICAgPGltZyBzcmM9e2BodHRwOi8vbG9jYWxob3N0OjMwOTUvJHtkYXRhLmNvbnRlbnR9YH0gc3R5bGU9e3sgbWF4SGVpZ2h0OiAyMDAgfX0gLz5cbiAgICAgICkgOiAoXG4gICAgICAgIHJlZ2V4aWZ5U3RyaW5nKHtcbiAgICAgICAgICBpbnB1dDogZGF0YS5jb250ZW50LFxuICAgICAgICAgIHBhdHRlcm46IC9AXFxbKC4rPyldXFwoKFxcZCs/KVxcKXxcXG4vZyxcbiAgICAgICAgICBkZWNvcmF0b3IobWF0Y2gsIGluZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBhcnI6IHN0cmluZ1tdIHwgbnVsbCA9IG1hdGNoLm1hdGNoKC9AXFxbKC4rPyldXFwoKFxcZCs/KVxcKS8pITtcbiAgICAgICAgICAgIGlmIChhcnIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8TGluayBrZXk9e21hdGNoICsgaW5kZXh9IHRvPXtgL3dvcmtzcGFjZS8ke3dvcmtzcGFjZX0vZG0vJHthcnJbMl19YH0+XG4gICAgICAgICAgICAgICAgICBAe2FyclsxXX1cbiAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gPGJyIGtleT17aW5kZXh9IC8+O1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICApLFxuICAgIFt3b3Jrc3BhY2UsIGRhdGEuY29udGVudF0sXG4gICk7XG5cbiAgcmV0dXJuIChcbiAgICA8Q2hhdFdyYXBwZXI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoYXQtaW1nXCI+XG4gICAgICAgIDxpbWcgc3JjPXtncmF2YXRhci51cmwodXNlci5lbWFpbCwgeyBzOiAnMzZweCcsIGQ6ICdyZXRybycgfSl9IGFsdD17dXNlci5uaWNrbmFtZX0gLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaGF0LXRleHRcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaGF0LXVzZXJcIj5cbiAgICAgICAgICA8Yj57dXNlci5uaWNrbmFtZX08L2I+XG4gICAgICAgICAgPHNwYW4+e2RheWpzKGRhdGEuY3JlYXRlZEF0KS5mb3JtYXQoJzpoOm1tIEEnKX08L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8cD57cmVzdWx0fTwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvQ2hhdFdyYXBwZXI+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBtZW1vKENoYXQpO1xuIiwiaW1wb3J0IHsgQ2hhdFpvbmUsIFNlY3Rpb24sIFN0aWNreUhlYWRlciB9IGZyb20gJy4vc3R5bGVzJztcbmltcG9ydCBSZWFjdCwgeyBSZWZPYmplY3QsIHVzZUNhbGxiYWNrLCB1c2VSZWYsIFZGQyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IElETSwgSUNoYXQgfSBmcm9tICdAdHlwaW5ncy9kYic7XG5pbXBvcnQgQ2hhdCBmcm9tICdAY29tcG9uZW50cy9DaGF0JztcbmltcG9ydCB7IFNjcm9sbGJhcnMgfSBmcm9tICdyZWFjdC1jdXN0b20tc2Nyb2xsYmFycy0yJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgY2hhdERhdGE6IHsgW2tleTogc3RyaW5nXTogKElETSB8IElDaGF0KVtdIH07XG4gIHNjcm9sbGJhclJlZjogUmVmT2JqZWN0PFNjcm9sbGJhcnM+O1xuICBpc1JlYWNoaW5nRW5kPzogYm9vbGVhbjtcbiAgaXNFbXB0eTogYm9vbGVhbjtcbiAgc2V0U2l6ZTogKGY6IChzaXplOiBudW1iZXIpID0+IG51bWJlcikgPT4gUHJvbWlzZTwoSURNIHwgSUNoYXQpW11bXSB8IHVuZGVmaW5lZD47XG59XG5jb25zdCBDaGF0TGlzdDogVkZDPFByb3BzPiA9ICh7IHNjcm9sbGJhclJlZiwgaXNSZWFjaGluZ0VuZCwgaXNFbXB0eSwgY2hhdERhdGEsIHNldFNpemUgfSkgPT4ge1xuICBjb25zdCBvblNjcm9sbCA9IHVzZUNhbGxiYWNrKFxuICAgICh2YWx1ZXMpID0+IHtcbiAgICAgIC8vIOunqCDsnITsl5Ag64+E64usIO2VmOyYgOqzoCwgICAgICAgICAgIOuniOyngOuniSDtjpjsnbTsp4DqsIAg7JWE64uI6rOgICDrjbDsnbTthLDqsIAg64Gd7J20IOyVhOuLkOuVjFxuICAgICAgaWYgKHZhbHVlcy5zY3JvbGxUb3AgPT09IDAgJiYgIWlzUmVhY2hpbmdFbmQgJiYgIWlzRW1wdHkpIHtcbiAgICAgICAgc2V0U2l6ZSgoc2l6ZSkgPT4gc2l6ZSArIDEpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50Py5zY3JvbGxUb3Aoc2Nyb2xsYmFyUmVmLmN1cnJlbnQ/LmdldFNjcm9sbEhlaWdodCgpIC0gdmFsdWVzLnNjcm9sbEhlaWdodCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3Njcm9sbGJhclJlZl0sXG4gICk7XG5cbiAgcmV0dXJuIChcbiAgICA8Q2hhdFpvbmU+XG4gICAgICA8U2Nyb2xsYmFycyBhdXRvSGlkZSByZWY9e3Njcm9sbGJhclJlZn0gb25TY3JvbGxGcmFtZT17b25TY3JvbGx9PlxuICAgICAgICB7T2JqZWN0LmVudHJpZXMoY2hhdERhdGEpLm1hcCgoW2RhdGUsIGNoYXRzXSkgPT4ge1xuICAgICAgICAgIC8v6rCd7LK07J2YIOuwmOuzteusuOydgCBPYmplY3RzLmVudHJpZXProZwg7ZWc64ukXG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxTZWN0aW9uIGNsYXNzTmFtZT17YHNlY3Rpb24tJHtkYXRlfWB9IGtleT17ZGF0ZX0+XG4gICAgICAgICAgICAgIDxTdGlja3lIZWFkZXI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbj57ZGF0ZX08L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9TdGlja3lIZWFkZXI+XG4gICAgICAgICAgICAgIHtjaGF0cy5tYXAoKGNoYXQpID0+IChcbiAgICAgICAgICAgICAgICA8Q2hhdCBrZXk9e2NoYXQuaWR9IGRhdGE9e2NoYXR9IC8+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9TZWN0aW9uPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pfVxuICAgICAgPC9TY3JvbGxiYXJzPlxuICAgIDwvQ2hhdFpvbmU+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDaGF0TGlzdDtcbiIsImltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJztcblxuZXhwb3J0IGNvbnN0IENvbnRhaW5lciA9IHN0eWxlZC5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtd3JhcDogd3JhcDtcbiAgaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMzhweCk7XG4gIGZsZXgtZmxvdzogY29sdW1uO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG5gO1xuXG5leHBvcnQgY29uc3QgSGVhZGVyID0gc3R5bGVkLmhlYWRlcmBcbiAgaGVpZ2h0OiA2NHB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICB3aWR0aDogMTAwJTtcbiAgLS1zYWYtMDogcmdiYSh2YXIoLS1za19mb3JlZ3JvdW5kX2xvdywgMjksIDI4LCAyOSksIDAuMTMpO1xuICBib3gtc2hhZG93OiAwIDFweCAwIHZhcigtLXNhZi0wKTtcbiAgcGFkZGluZzogMjBweCAxNnB4IDIwcHggMjBweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICYgaW1nIHtcbiAgICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgfVxuYDtcblxuZXhwb3J0IGNvbnN0IERyYWdPdmVyID0gc3R5bGVkLmRpdmBcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDY0cHg7XG4gIGxlZnQ6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDY0cHgpO1xuICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgb3BhY2l0eTogMC43O1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZm9udC1zaXplOiA0MHB4O1xuYDtcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUGFyYW1zIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcbmltcG9ydCB7IENvbnRhaW5lciwgRHJhZ092ZXIsIEhlYWRlciB9IGZyb20gJy4vc3R5bGVzJztcbmltcG9ydCB1c2VTV1IgZnJvbSAnc3dyJztcbmltcG9ydCB1c2VTV1JJbmZpbml0ZSBmcm9tICdzd3IvaW5maW5pdGUnO1xuaW1wb3J0IGZldGNoZXIgZnJvbSAnQHV0aWxzL2ZldGNoZXInO1xuaW1wb3J0IENoYXRCb3ggZnJvbSAnQGNvbXBvbmVudHMvQ2hhdEJveCc7XG5pbXBvcnQgQ2hhdExpc3QgZnJvbSAnQGNvbXBvbmVudHMvQ2hhdExpc3QnO1xuaW1wb3J0IHVzZUlucHV0IGZyb20gJ0Bob29rcy91c2VJbnB1dCc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgSUNoYW5uZWwsIElETSwgSVVzZXIgfSBmcm9tICdAdHlwaW5ncy9kYic7XG5pbXBvcnQgbWFrZVNlY3Rpb24gZnJvbSAnQHV0aWxzL21ha2VTZWN0aW9ucyc7XG5pbXBvcnQgdXNlU29ja2V0IGZyb20gJ0Bob29rcy91c2VTb2NrZXQnO1xuaW1wb3J0IHsgU2Nyb2xsYmFycyB9IGZyb20gJ3JlYWN0LWN1c3RvbS1zY3JvbGxiYXJzLTInO1xuaW1wb3J0IEludml0ZUNoYW5uZWxNb2RhbCBmcm9tICdAY29tcG9uZW50cy9JbnZpdGVDaGFubmVsTW9kYWwnO1xuaW1wb3J0IHsgQnNGaWxsUGVyc29uUGx1c0ZpbGwgfSBmcm9tICdyZWFjdC1pY29ucy9icyc7XG5pbXBvcnQgeyB0b2FzdCwgVG9hc3RDb250YWluZXIgfSBmcm9tICdyZWFjdC10b2FzdGlmeSc7XG5cbmNvbnN0IENoYW5uZWwgPSAoKSA9PiB7XG4gIGNvbnN0IHsgd29ya3NwYWNlLCBjaGFubmVsIH0gPSB1c2VQYXJhbXM8eyB3b3Jrc3BhY2U6IHN0cmluZzsgY2hhbm5lbDogc3RyaW5nIH0+KCk7XG5cbiAgY29uc3QgeyBkYXRhOiBteURhdGEgfSA9IHVzZVNXUihgaHR0cDovL2xvY2FsaG9zdDozMDk1L2FwaS91c2Vyc2AsIGZldGNoZXIpO1xuICBjb25zdCB7IGRhdGE6IGNoYW5uZWxEYXRhIH0gPSB1c2VTV1I8SUNoYW5uZWxbXT4oXG4gICAgYGh0dHA6Ly9sb2NhbGhvc3Q6MzA5NS9hcGkvd29ya3NwYWNlcy8ke3dvcmtzcGFjZX0vY2hhbm5lbHNgLFxuICAgIGZldGNoZXIsXG4gICk7XG5cbiAgY29uc3Qge1xuICAgIGRhdGE6IGNoYXREYXRhLFxuICAgIG11dGF0ZTogbXV0YXRlQ2hhdCxcbiAgICBzZXRTaXplLFxuICB9ID0gdXNlU1dSSW5maW5pdGU8SURNW10+KFxuICAgIChpbmRleCkgPT5cbiAgICAgIGBodHRwOi8vbG9jYWxob3N0OjMwOTUvYXBpL3dvcmtzcGFjZXMvJHt3b3Jrc3BhY2V9L2NoYW5uZWxzLyR7Y2hhbm5lbH0vY2hhdHM/cGVyUGFnZT0yMCZwYWdlPSR7aW5kZXggKyAxfWAsXG4gICAgZmV0Y2hlcixcbiAgKTtcblxuICBjb25zb2xlLmxvZyhjaGF0RGF0YSk7XG5cbiAgY29uc3QgeyBkYXRhOiBjaGFubmVsTWVtYmVyc0RhdGEgfSA9IHVzZVNXUjxhbnk+KFxuICAgIG15RGF0YSA/IGBodHRwOi8vbG9jYWxob3N0OjMwOTUvYXBpL3dvcmtzcGFjZXMvJHt3b3Jrc3BhY2V9L2NoYW5uZWxzLyR7Y2hhbm5lbH0vbWVtYmVyc2AgOiBudWxsLFxuICAgIGZldGNoZXIsXG4gICk7XG4gIGNvbnN0IFtzb2NrZXRdID0gdXNlU29ja2V0KHdvcmtzcGFjZSk7XG4gIGNvbnN0IFtjaGF0LCBvbkNoYW5nZUNoYXQsIHNldENoYXRdID0gdXNlSW5wdXQoJycpO1xuICBjb25zdCBbc2hvd0ludml0ZUNoYW5uZWxNb2RhbCwgc2V0U2hvd0ludml0ZUNoYW5uZWxNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtvbkRyYWdlT3Zlciwgc2V0T25EcmFnT3Zlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHNjcm9sbGJhclJlZiA9IHVzZVJlZjxTY3JvbGxiYXJzPihudWxsKTtcblxuICBjb25zdCBpc0VtcHR5ID0gY2hhdERhdGE/LlswXT8ubGVuZ3RoID09PSAwOyAvL+uNsOydtO2EsOqwgCDrjZTsnbTsg4Eg7JeG64qU6rCAP1xuICBjb25zdCBpc1JlYWNoaW5nRW5kID0gaXNFbXB0eSB8fCAoY2hhdERhdGEgJiYgY2hhdERhdGFbY2hhdERhdGEubGVuZ3RoIC0gMV0/Lmxlbmd0aCA8IDIwKTsgLy/rp4jsp4Drp4kg7Y6Y7J207KeA7J246rCAP1xuXG4gIGNvbnN0IG9uU3VibWl0Rm9ybSA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGlmIChjaGF0Py50cmltKCkpIHtcbiAgICAgICAgYXhpb3NcbiAgICAgICAgICAucG9zdChgaHR0cDovL2xvY2FsaG9zdDozMDk1L2FwaS93b3Jrc3BhY2VzLyR7d29ya3NwYWNlfS9jaGFubmVscy8ke2NoYW5uZWx9L2NoYXRzYCwge1xuICAgICAgICAgICAgY29udGVudDogY2hhdCxcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIG11dGF0ZUNoYXQoKTtcbiAgICAgICAgICAgIHNldENoYXQoJycpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYCR7d29ya3NwYWNlfS0ke2NoYW5uZWx9YCwgbmV3IERhdGUoKS5nZXRUaW1lKCkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgc2Nyb2xsYmFyUmVmLmN1cnJlbnQ/LnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2NoYXRdLFxuICApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYCR7d29ya3NwYWNlfS0ke2NoYW5uZWx9YCwgbmV3IERhdGUoKS5nZXRUaW1lKCkudG9TdHJpbmcoKSk7XG4gIH0sIFt3b3Jrc3BhY2UsIGNoYW5uZWxdKTtcblxuICBjb25zdCBvbk1lc3NhZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0YTogYW55KSA9PiB7XG4gICAgICBtdXRhdGVDaGF0KChjaGF0RGF0YSkgPT4ge1xuICAgICAgICBjaGF0RGF0YT8uWzBdLnB1c2goZGF0YSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGAke3dvcmtzcGFjZX0tJHtjaGFubmVsfWAsIG5ldyBEYXRlKCkuZ2V0VGltZSgpLnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gY2hhdERhdGE7XG4gICAgICB9LCBmYWxzZSkudGhlbigoKSA9PiB7XG4gICAgICAgIHRvYXN0LnN1Y2Nlc3MoJ+yDiCDrqZTsi5zsp4DqsIAg64+E7LCp7ZaI7Iq164uI64ukLicsIHtcbiAgICAgICAgICBvbkNsaWNrKCkge1xuICAgICAgICAgICAgc2Nyb2xsYmFyUmVmLmN1cnJlbnQ/LnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbbXlEYXRhLCBtdXRhdGVDaGF0XSxcbiAgKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIG9u7JeQ7ISgIOydtOuypO2KuCDsnbTrpoQsIGNhbGxiYWNrIO2VqOyImFxuICAgIHNvY2tldD8ub24oJ2NoYXQnLCBvbk1lc3NhZ2UpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzb2NrZXQ/Lm9mZignY2hhdCcsIG9uTWVzc2FnZSk7XG4gICAgfTtcbiAgfSwgW3NvY2tldCwgb25NZXNzYWdlXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2hhdERhdGE/Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgc2Nyb2xsYmFyUmVmLmN1cnJlbnQ/LnNjcm9sbFRvQm90dG9tKCk7XG4gICAgfVxuICB9LCBbY2hhdERhdGFdKTtcblxuICBjb25zdCBjaGF0U2VjdGlvbnMgPSBtYWtlU2VjdGlvbihjaGF0RGF0YSA/IChbXSBhcyBJRE1bXSkuY29uY2F0KC4uLmNoYXREYXRhKS5yZXZlcnNlKCkgOiBbXSk7XG5cbiAgY29uc3Qgb25DbGlja0ludml0ZUNoYW5uZWwgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U2hvd0ludml0ZUNoYW5uZWxNb2RhbCh0cnVlKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IG9uQ2xvc2VNb2RhbCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTaG93SW52aXRlQ2hhbm5lbE1vZGFsKGZhbHNlKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IG9uRHJvcCA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAvL2Jyb3dzZXLrp4jri6QgaXRlbXPrgpggZmlsZXPsl5Ag64u06rmAXG4gICAgICBpZiAoZS5kYXRhVHJhbnNmZXIuaXRlbXMpIHtcbiAgICAgICAgLy8gZGF0YVRyYW5zZmVyLml0ZW1z7JeQIOuLtOq4tOqyveyasFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGUuZGF0YVRyYW5zZmVyLml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGUuZGF0YVRyYW5zZmVyLml0ZW1zW2ldLmtpbmQgPT09ICdmaWxlJykge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGUuZGF0YVRyYW5zZmVyLml0ZW1zW2ldLmdldEFzRmlsZSgpO1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdpbWFnZScsIGZpbGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZGF0YVRyYW5zZmVyLmZpbGVz7JeQIOuLtOq4tOqyveyasFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGUuZGF0YVRyYW5zZmVyLmZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdpbWFnZScsIGUuZGF0YVRyYW5zZmVyLmZpbGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXhpb3MucG9zdChgaHR0cDovL2xvY2FsaG9zdDozMDk1L2FwaS93b3Jrc3BhY2VzLyR7d29ya3NwYWNlfS9jaGFubmVscy8ke2NoYW5uZWx9L2ltYWdlc2AsIGZvcm1EYXRhKS50aGVuKCgpID0+IHtcbiAgICAgICAgc2V0T25EcmFnT3ZlcihmYWxzZSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGAke3dvcmtzcGFjZX0tJHtjaGFubmVsfWAsIG5ldyBEYXRlKCkuZ2V0VGltZSgpLnRvU3RyaW5nKCkpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbd29ya3NwYWNlLCBjaGFubmVsXSxcbiAgKTtcblxuICBjb25zdCBvbkRyYWdPdmVyID0gdXNlQ2FsbGJhY2soKGUpID0+IHtcbiAgICBjb25zb2xlLmxvZygn65Oc656Y6re47KSRJyk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNldE9uRHJhZ092ZXIodHJ1ZSk7XG4gIH0sIFtdKTtcblxuICBpZiAoIWNoYW5uZWxEYXRhIHx8ICFteURhdGEpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPENvbnRhaW5lciBvbkRyYWdPdmVyPXtvbkRyYWdPdmVyfSBvbkRyb3A9e29uRHJvcH0+XG4gICAgICA8SGVhZGVyPlxuICAgICAgICA8c3Bhbj4je2NoYW5uZWx9PC9zcGFuPlxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleDogMSwganVzdGlmeUNvbnRlbnQ6ICdmbGV4LWVuZCcsIGFsaWduSXRlbXM6ICdjZW50ZXInIH19PlxuICAgICAgICAgIDxzcGFuPntjaGFubmVsTWVtYmVyc0RhdGEgJiYgY2hhbm5lbE1lbWJlcnNEYXRhWzBdLk1lbWJlcnMubGVuZ3RofTwvc3Bhbj5cbiAgICAgICAgICA8QnNGaWxsUGVyc29uUGx1c0ZpbGwgb25DbGljaz17b25DbGlja0ludml0ZUNoYW5uZWx9IHN0eWxlPXt7IG1hcmdpbkxlZnQ6ICc1cHgnIH19IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9IZWFkZXI+XG4gICAgICA8Q2hhdExpc3RcbiAgICAgICAgY2hhdERhdGE9e2NoYXRTZWN0aW9uc31cbiAgICAgICAgc2Nyb2xsYmFyUmVmPXtzY3JvbGxiYXJSZWZ9XG4gICAgICAgIGlzUmVhY2hpbmdFbmQ9e2lzUmVhY2hpbmdFbmR9XG4gICAgICAgIGlzRW1wdHk9e2lzRW1wdHl9XG4gICAgICAgIHNldFNpemU9e3NldFNpemV9XG4gICAgICAvPlxuICAgICAgPENoYXRCb3ggY2hhdD17Y2hhdH0gb25DaGFuZ2VDaGF0PXtvbkNoYW5nZUNoYXR9IG9uU3VibWl0Rm9ybT17b25TdWJtaXRGb3JtfSAvPlxuICAgICAgPEludml0ZUNoYW5uZWxNb2RhbFxuICAgICAgICBzaG93PXtzaG93SW52aXRlQ2hhbm5lbE1vZGFsfVxuICAgICAgICBvbkNsb3NlTW9kYWw9e29uQ2xvc2VNb2RhbH1cbiAgICAgICAgc2V0U2hvd0ludml0ZUNoYW5uZWxNb2RhbD17c2V0U2hvd0ludml0ZUNoYW5uZWxNb2RhbH1cbiAgICAgIC8+XG4gICAgICA8VG9hc3RDb250YWluZXIgcG9zaXRpb249XCJib3R0b20tY2VudGVyXCIgbGltaXQ9ezF9IC8+XG4gICAgICB7b25EcmFnZU92ZXIgJiYgPERyYWdPdmVyPuyXheuhnOuTnCE8L0RyYWdPdmVyPn1cbiAgICA8L0NvbnRhaW5lcj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENoYW5uZWw7XG4iLCJpbXBvcnQgeyBJQ2hhdCwgSURNIH0gZnJvbSAnQHR5cGluZ3MvZGInO1xuaW1wb3J0IGRheWpzIGZyb20gJ2RheWpzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWFrZVNlY3Rpb248VCBleHRlbmRzIElETSB8IElDaGF0PihjaGF0TGlzdDogVFtdKSB7XG4gIGNvbnN0IHNlY3Rpb25zOiB7IFtrZXk6IHN0cmluZ106IFRbXSB9ID0ge307XG4gIGNoYXRMaXN0LmZvckVhY2goKGNoYXQpID0+IHtcbiAgICBjb25zdCBtb250aERhdGUgPSBkYXlqcyhjaGF0LmNyZWF0ZWRBdCkuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc2VjdGlvbnNbbW9udGhEYXRlXSkpIHtcbiAgICAgIHNlY3Rpb25zW21vbnRoRGF0ZV0ucHVzaChjaGF0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VjdGlvbnNbbW9udGhEYXRlXSA9IFtjaGF0XTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gc2VjdGlvbnM7XG59XG4iXSwibmFtZXMiOlsiQ2hhdEFyZWEiLCJzdHlsZWQiLCJGb3JtIiwiTWVudGlvbnNUZXh0YXJlYSIsIk1lbnRpb25zSW5wdXQiLCJUb29sYm94IiwiU2VuZEJ1dHRvbiIsIkVhY2hNZW50aW9uIiwiZm9jdXMiLCJjaGF0Iiwib25TdWJtaXRGb3JtIiwib25DaGFuZ2VDaGF0IiwicGxhY2Vob2xkZXIiLCJ3b3Jrc3BhY2UiLCJ1c2VQYXJhbXMiLCJ1c2VTV1IiLCJmZXRjaGVyIiwidXNlckRhdGEiLCJkYXRhIiwibWVtYmVyRGF0YSIsImVycm9yIiwibXV0YXRlIiwidGV4dGFyZWFSZWYiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJjdXJyZW50IiwiYXV0b3NpemUiLCJvbktleWRvd25DaGF0IiwidXNlQ2FsbGJhY2siLCJlIiwia2V5IiwicHJldmVudERlZmF1bHQiLCJzaGlmdEtleSIsInJlbmRlclN1Z2dlc3Rpb24iLCJzdWdnZXN0aW9uIiwic2VhcmNoIiwiaGlnaGxpZ2h0ZWREaXNwbGF5IiwiaW5kZXgiLCJzcmMiLCJncmF2YXRhciIsImVtYWlsIiwicyIsImQiLCJhbHQiLCJuaWNrbmFtZSIsIm9uU3VibWl0IiwidmFsdWUiLCJvbkNoYW5nZSIsIm9uS2V5RG93biIsImlkIiwiaW5wdXRSZWYiLCJhbGxvd1N1Z2dlc3Rpb25zQWJvdmVDdXJzb3IiLCJhcHBlbmRTcGFjZU9uQWRkIiwidHJpZ2dlciIsIm1hcCIsInYiLCJkaXNwbGF5IiwiQ2hhdFpvbmUiLCJTZWN0aW9uIiwiU3RpY2t5SGVhZGVyIiwiQ2hhdFdyYXBwZXIiLCJDaGF0IiwidXNlciIsIlNlbmRlciIsIlVzZXIiLCJyZXN1bHQiLCJ1c2VNZW1vIiwiY29udGVudCIsInN0YXJ0c1dpdGgiLCJzdHlsZSIsIm1heEhlaWdodCIsInJlZ2V4aWZ5U3RyaW5nIiwiaW5wdXQiLCJwYXR0ZXJuIiwiZGVjb3JhdG9yIiwibWF0Y2giLCJhcnIiLCJ0byIsImNsYXNzTmFtZSIsImRheWpzIiwiY3JlYXRlZEF0IiwiZm9ybWF0IiwibWVtbyIsInNjcm9sbGJhclJlZiIsImlzUmVhY2hpbmdFbmQiLCJpc0VtcHR5IiwiY2hhdERhdGEiLCJzZXRTaXplIiwib25TY3JvbGwiLCJ2YWx1ZXMiLCJzY3JvbGxUb3AiLCJzaXplIiwidGhlbiIsImdldFNjcm9sbEhlaWdodCIsInNjcm9sbEhlaWdodCIsImF1dG9IaWRlIiwicmVmIiwib25TY3JvbGxGcmFtZSIsIk9iamVjdCIsImVudHJpZXMiLCJkYXRlIiwiY2hhdHMiLCJDb250YWluZXIiLCJIZWFkZXIiLCJEcmFnT3ZlciIsImNoYW5uZWwiLCJteURhdGEiLCJjaGFubmVsRGF0YSIsInVzZVNXUkluZmluaXRlIiwibXV0YXRlQ2hhdCIsImNvbnNvbGUiLCJsb2ciLCJjaGFubmVsTWVtYmVyc0RhdGEiLCJzb2NrZXQiLCJ1c2VTb2NrZXQiLCJ1c2VJbnB1dCIsInNldENoYXQiLCJ1c2VTdGF0ZSIsInNob3dJbnZpdGVDaGFubmVsTW9kYWwiLCJzZXRTaG93SW52aXRlQ2hhbm5lbE1vZGFsIiwib25EcmFnZU92ZXIiLCJzZXRPbkRyYWdPdmVyIiwibGVuZ3RoIiwidHJpbSIsImF4aW9zIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkRhdGUiLCJnZXRUaW1lIiwidG9TdHJpbmciLCJzZXRUaW1lb3V0Iiwic2Nyb2xsVG9Cb3R0b20iLCJjYXRjaCIsIm9uTWVzc2FnZSIsInB1c2giLCJ0b2FzdCIsIm9uQ2xpY2siLCJjbG9zZU9uQ2xpY2siLCJvbiIsIm9mZiIsImNoYXRTZWN0aW9ucyIsIm1ha2VTZWN0aW9uIiwiY29uY2F0IiwicmV2ZXJzZSIsIm9uQ2xpY2tJbnZpdGVDaGFubmVsIiwib25DbG9zZU1vZGFsIiwib25Ecm9wIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImRhdGFUcmFuc2ZlciIsIml0ZW1zIiwiaSIsImtpbmQiLCJmaWxlIiwiZ2V0QXNGaWxlIiwiYXBwZW5kIiwiZmlsZXMiLCJvbkRyYWdPdmVyIiwiZmxleCIsImp1c3RpZnlDb250ZW50IiwiYWxpZ25JdGVtcyIsIk1lbWJlcnMiLCJtYXJnaW5MZWZ0IiwiQ2hhdExpc3QiLCJDaGF0Qm94IiwiSW52aXRlQ2hhbm5lbE1vZGFsIiwic2hvdyIsInBvc2l0aW9uIiwibGltaXQiLCJjaGF0TGlzdCIsInNlY3Rpb25zIiwiZm9yRWFjaCIsIm1vbnRoRGF0ZSIsIkFycmF5IiwiaXNBcnJheSJdLCJzb3VyY2VSb290IjoiIn0=