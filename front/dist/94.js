"use strict";(self.webpackChunksleact_ts_front=self.webpackChunksleact_ts_front||[]).push([[94],{92309:(e,n,t)=>{t.d(n,{Z:()=>Z});var r,a,o,l,i,c,s=t(67294),u=t(76741),p=t(32034);function d(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var f=u.Z.div(r||(r=d(["\n  display: flex;\n  width: 100%;\n  padding: 20px;\n  padding-top: 0;\n"]))),m=u.Z.form(a||(a=d(["\n  color: rgb(29, 28, 29);\n  font-size: 15px;\n  width: 100%;\n  border-radius: 4px;\n  border: 1px solid rgb(29, 28, 29);\n"]))),h=(0,u.Z)(p.r)(o||(o=d(["\n  font-family: Slack-Lato, appleLogo, sans-serif;\n  font-size: 15px;\n  padding: 8px 9px;\n  width: 100%;\n  & strong {\n    background: skyblue;\n  }\n  & textarea {\n    height: 44px;\n    padding: 9px 10px !important;\n    outline: none !important;\n    border-radius: 4px !important;\n    resize: none !important;\n    line-height: 22px;\n    border: none;\n  }\n  & ul {\n    border: 1px solid lightgray;\n    max-height: 200px;\n    overflow-y: auto;\n    padding: 9px 10px;\n    background: white;\n    border-radius: 4px;\n    width: 150px;\n  }\n"]))),g=u.Z.div(l||(l=d(["\n  position: relative;\n  background: rgb(248, 248, 248);\n  height: 41px;\n  display: flex;\n  border-top: 1px solid rgb(221, 221, 221);\n  align-items: center;\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n"]))),b=u.Z.button(i||(i=d(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n"]))),x=u.Z.button(c||(c=d(["\n  padding: 4px 20px;\n  background: transparent;\n  border: none;\n  display: flex;\n  align-items: center;\n  color: rgb(28, 29, 28);\n  width: 100%;\n  & img {\n    margin-right: 5px;\n  }\n  ",";\n"])),(function(e){return e.focus&&"\n    background: #1264a3;\n    color: white;\n  "})),v=t(3682),y=t(8100),w=t(83564),k=t(5977),E=t(66182),S=t.n(E);const Z=function(e){var n=e.chat,t=e.onSubmitForm,r=e.onChangeChat,a=e.placeholder,o=(0,k.UO)().workspace,l=(0,y.ZP)("http://localhost:3095/api/users",w.Z),i=l.data,c=(l.error,l.mutate,(0,y.ZP)(i?"http://localhost:3095/api/workspaces/".concat(o,"/members"):null,w.Z).data),u=(0,s.useRef)(null);(0,s.useEffect)((function(){u.current&&(0,v.Z)(u.current)}),[]);var d=(0,s.useCallback)((function(e){"Enter"===e.key&&(e.preventDefault(),e.shiftKey||(e.preventDefault(),t(e)))}),[t]),E=(0,s.useCallback)((function(e,n,t,r,a){if(c)return s.createElement(x,{focus:a},s.createElement("img",{src:S().url(c[r].email,{s:"20px",d:"retro"}),alt:c[r].nickname}),s.createElement("span",null,t))}),[c]);return s.createElement(f,null,s.createElement(m,{onSubmit:t},s.createElement(h,{value:n,onChange:r,onKeyDown:d,id:"edit-chat",placeholder:a,inputRef:u,allowSuggestionsAboveCursor:!0},s.createElement(p.p,{appendSpaceOnAdd:!0,trigger:"@",data:(null==c?void 0:c.map((function(e){return{id:e.id,display:e.nickname}})))||[],renderSuggestion:E})),s.createElement(g,null,s.createElement(b,null,"보내기"))))}},32545:(e,n,t)=>{t.d(n,{Z:()=>O});var r,a,o,l=t(76741);function i(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var c,s,u,p=l.Z.div(r||(r=i(["\n  width: 100%;\n  display: flex;\n  flex: 1;\n"]))),d=l.Z.section(a||(a=i(["\n  margin-top: 20px;\n  border-top: 1px solid #eee;\n"]))),f=l.Z.div(o||(o=i(["\n  display: flex;\n  justify-content: center;\n  flex: 1;\n  width: 100%;\n  position: sticky;\n  top: 14px;\n  & button {\n    font-weight: bold;\n    font-size: 13px;\n    height: 28px;\n    line-height: 27px;\n    padding: 0 16px;\n    z-index: 2;\n    --saf-0: rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);\n    box-shadow: 0 0 0 1px var(--saf-0), 0 1px 3px 0 rgba(0, 0, 0, 0.08);\n    border-radius: 24px;\n    position: relative;\n    top: -13px;\n    background: white;\n    border: none;\n    outline: none;\n  }\n"]))),m=t(67294),h=l.Z.div(c||(s=["\n  display: flex;\n  padding: 8px 20px;\n  &:hover {\n    background: #eee;\n  }\n  & .chat-img {\n    display: flex;\n    width: 36px;\n    margin-right: 8px;\n    & img {\n      width: 36px;\n      height: 36px;\n    }\n  }\n  & .chat-text {\n    display: flex;\n    flex-wrap: wrap;\n    flex: 1;\n    & p {\n      flex: 0 0 100%;\n      margin: 0;\n    }\n  }\n  & .chat-user {\n    display: flex;\n    flex: 0 0 100%;\n    align-items: center;\n    & > b {\n      margin-right: 5px;\n    }\n    & > span {\n      font-size: 12px;\n    }\n  }\n  & a {\n    text-decoration: none;\n    color: deepskyblue;\n  }\n"],u||(u=s.slice(0)),c=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(u)}})))),g=t(66182),b=t.n(g),x=t(27484),v=t.n(x),y=t(38817),w=t(73727),k=t(5977),E=function(e){var n=e.data,t="Sender"in n?n.Sender:n.User,r=(0,k.UO)().workspace,a=(0,m.useMemo)((function(){return n.content.startsWith("uploads\\")||n.content.startsWith("uploads/")?m.createElement("img",{src:"http://localhost:3095/".concat(n.content),style:{maxHeight:200}}):(0,y.Z)({input:n.content,pattern:/@\[(.+?)]\((\d+?)\)|\n/g,decorator:function(e,n){var t=e.match(/@\[(.+?)]\((\d+?)\)/);return t?m.createElement(w.rU,{key:e+n,to:"/workspace/".concat(r,"/dm/").concat(t[2])},"@",t[1]):m.createElement("br",{key:n})}})}),[r,n.content]);return m.createElement(h,null,m.createElement("div",{className:"chat-img"},m.createElement("img",{src:b().url(t.email,{s:"36px",d:"retro"}),alt:t.nickname})),m.createElement("div",{className:"chat-text"},m.createElement("div",{className:"chat-user"},m.createElement("b",null,t.nickname),m.createElement("span",null,v()(n.createdAt).format(":h:mm A"))),m.createElement("p",null,a)))};const S=(0,m.memo)(E);var Z=t(86658);function A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}const O=function(e){var n=e.scrollbarRef,t=e.isReachingEnd,r=e.isEmpty,a=e.chatData,o=e.setSize,l=(0,m.useCallback)((function(e){0!==e.scrollTop||t||r||o((function(e){return e+1})).then((function(){var t,r;null===(t=n.current)||void 0===t||t.scrollTop((null===(r=n.current)||void 0===r?void 0:r.getScrollHeight())-e.scrollHeight)}))}),[n]);return m.createElement(p,null,m.createElement(Z.$B,{autoHide:!0,ref:n,onScrollFrame:l},Object.entries(a).map((function(e){var n,t,r=(t=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],l=!0,i=!1;try{for(t=t.call(e);!(l=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==t.return||t.return()}finally{if(i)throw a}}return o}}(n,t)||function(e,n){if(e){if("string"==typeof e)return A(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,n):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],o=r[1];return m.createElement(d,{className:"section-".concat(a),key:a},m.createElement(f,null,m.createElement("button",null,a)),o.map((function(e){return m.createElement(S,{key:e.id,data:e})})))}))))}},83094:(e,n,t)=>{t.r(n),t.d(n,{default:()=>C});var r,a,o,l=t(67294),i=t(5977),c=t(76741);function s(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var u=c.Z.div(r||(r=s(["\n  display: flex;\n  flex-wrap: wrap;\n  height: calc(100vh - 38px);\n  flex-flow: column;\n  position: relative;\n"]))),p=c.Z.header(a||(a=s(["\n  height: 64px;\n  display: flex;\n  width: 100%;\n  --saf-0: rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);\n  box-shadow: 0 1px 0 var(--saf-0);\n  padding: 20px 16px 20px 20px;\n  font-weight: bold;\n  align-items: center;\n  & img {\n    margin-right: 5px;\n  }\n"]))),d=c.Z.div(o||(o=s(["\n  position: absolute;\n  top: 64px;\n  left: 0;\n  width: 100%;\n  height: calc(100% - 64px);\n  background: white;\n  opacity: 0.7;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 40px;\n"]))),f=t(66182),m=t.n(f),h=t(8100),g=t(44593),b=t(83564),x=t(92309),v=t(32545),y=t(38678),w=t(9669),k=t.n(w),E=t(6501),S=t(32951),Z=t(39249);function A(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],l=!0,i=!1;try{for(t=t.call(e);!(l=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==t.return||t.return()}finally{if(i)throw a}}return o}}(e,n)||O(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,n){if(e){if("string"==typeof e)return j(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?j(e,n):void 0}}function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}t(55202);const C=function(){var e,n,t,r=(0,i.UO)(),a=r.workspace,o=r.id,c=(0,h.ZP)("http://localhost:3095/api/workspaces/".concat(a,"/members/").concat(o),b.Z).data,s=(0,h.ZP)("http://localhost:3095/api/users",b.Z).data,f=(0,g.ZP)((function(e){return"http://localhost:3095/api/workspaces/".concat(a,"/dms/").concat(o,"/chats?perPage=20&page=").concat(e+1)}),b.Z),w=f.data,C=f.mutate,T=f.setSize,z=A((0,l.useState)(!1),2),D=z[0],I=z[1],P=A((0,y.Z)(""),3),_=P[0],R=P[1],U=P[2],F=(0,l.useRef)(null),M=0===(null==w||null===(e=w[0])||void 0===e?void 0:e.length),B=M||w&&(null===(n=w[w.length-1])||void 0===n?void 0:n.length)<20,H=(0,l.useCallback)((function(e){e.preventDefault(),null!=_&&_.trim()&&k().post("http://localhost:3095/api/workspaces/".concat(a,"/dms/").concat(o,"/chats"),{content:_}).then((function(){C(),U(""),localStorage.setItem("".concat(a,"-").concat(o),(new Date).getTime().toString()),setTimeout((function(){var e;null===(e=F.current)||void 0===e||e.scrollToBottom()}),100)})).catch(console.error)}),[_]);console.log(w),(0,l.useEffect)((function(){localStorage.setItem("".concat(a,"-").concat(o),(new Date).getTime().toString())}),[a,o]);var N=A((0,S.Z)(a),1)[0],Y=(0,l.useCallback)((function(e){C((function(n){return null==n||n[0].push(e),localStorage.setItem("".concat(a,"-").concat(o),(new Date).getTime().toString()),n}),!1).then((function(){Z.Am.success("새 메시지가 도착했습니다.",{onClick:function(){var e;null===(e=F.current)||void 0===e||e.scrollToBottom()},closeOnClick:!0})}))}),[o,s,C]);(0,l.useEffect)((function(){return null==N||N.on("dm",Y),function(){null==N||N.off("dm",Y)}}),[N,Y]),(0,l.useEffect)((function(){var e;1===(null==w?void 0:w.length)&&(null===(e=F.current)||void 0===e||e.scrollToBottom())}),[w]);var $,K=(0,E.Z)(w?(t=[]).concat.apply(t,($=w,function(e){if(Array.isArray(e))return j(e)}($)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}($)||O($)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).reverse():[]),L=(0,l.useCallback)((function(e){e.preventDefault();var n=new FormData;if(e.dataTransfer.items){for(var t=0;t<e.dataTransfer.items.length;t++)if("file"===e.dataTransfer.items[t].kind){var r=e.dataTransfer.items[t].getAsFile();n.append("image",r)}}else for(var l=0;l<e.dataTransfer.files.length;l++)n.append("image",e.dataTransfer.files[l]);k().post("http://localhost:3095/api/workspaces/".concat(a,"/dms/").concat(o,"/images"),n).then((function(){I(!1),localStorage.setItem("".concat(a,"-").concat(o),(new Date).getTime().toString())}))}),[a,o]),W=(0,l.useCallback)((function(e){console.log("드래그중"),e.preventDefault(),I(!0)}),[]);return c&&s?l.createElement(u,{onDragOver:W,onDrop:L},l.createElement(p,null,l.createElement("img",{src:m().url(c.email,{s:"24px",d:"retro"}),alt:c.nickname}),l.createElement("span",null,c.nickname)),l.createElement(v.Z,{chatData:K,scrollbarRef:F,isReachingEnd:B,isEmpty:M,setSize:T}),l.createElement(Z.Ix,{position:"bottom-center",limit:1}),l.createElement(x.Z,{chat:_,onChangeChat:R,onSubmitForm:H}),D&&l.createElement(d,null,"업로드!")):null}},6501:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(27484),a=t.n(r);function o(e){var n={};return e.forEach((function(e){var t=a()(e.createdAt).format("YYYY-MM-DD");Array.isArray(n[t])?n[t].push(e):n[t]=[e]})),n}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFxQ29DLElBQU0sSUFBSXFFLE1BQU9DLFVBQVVDLGlCQUdwRSxDQUFDM0csRUFBV29DLElBR1JxRyxHQUFhMUgsRUFBQUEsRUFBQUEsY0FBWSxTQUFDQyxHQUM5QitGLFFBQVFDLElBQUksUUFDWmhHLEVBQUVFLGlCQUNGK0UsR0FBYyxLQUNiLElBRUgsT0FBSzdGLEdBQWF3RixFQUloQixnQkFBQ0gsRUFBRCxDQUFXZ0QsV0FBWUEsRUFBWVgsT0FBUUEsR0FDekMsZ0JBQUNwQyxFQUFELEtBQ0UsdUJBQUtqRSxJQUFLQyxJQUFBQSxJQUFhdEIsRUFBU3VCLE1BQU8sQ0FBRUMsRUFBRyxPQUFRQyxFQUFHLFVBQVlDLElBQUsxQixFQUFTMkIsV0FDakYsNEJBQU8zQixFQUFTMkIsV0FFbEIsZ0JBQUMyRyxFQUFBLEVBQUQsQ0FDRWpFLFNBQVVpRCxFQUNWcEQsYUFBY0EsRUFDZEMsY0FBZUEsRUFDZkMsUUFBU0EsRUFDVEUsUUFBU0EsSUFFWCxnQkFBQyxLQUFELENBQWdCaUUsU0FBUyxnQkFBZ0JDLE1BQU8sSUFDaEQsZ0JBQUNDLEVBQUEsRUFBRCxDQUFTakosS0FBTUEsRUFBTUUsYUFBY0EsRUFBY0QsYUFBY0EsSUFDOURtRyxHQUFlLGdCQUFDTCxFQUFELGNBakJYLE8sd0RDOUlJLFNBQVNnQyxFQUFtQ21CLEdBQ3pELElBQU1DLEVBQW1DLEdBU3pDLE9BUkFELEVBQVNFLFNBQVEsU0FBQ3BKLEdBQ2hCLElBQU1xSixFQUFZL0UsR0FBQUEsQ0FBTXRFLEVBQUt1RSxXQUFXQyxPQUFPLGNBQzNDOEUsTUFBTUMsUUFBUUosRUFBU0UsSUFDekJGLEVBQVNFLEdBQVc3QixLQUFLeEgsR0FFekJtSixFQUFTRSxHQUFhLENBQUNySixNQUdwQm1KIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9DaGF0Qm94L3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9DaGF0Qm94L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYXRMaXN0L3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9DaGF0L3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vY29tcG9uZW50cy9DaGF0L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9jb21wb25lbnRzL0NoYXRMaXN0L2luZGV4LnRzeCIsIndlYnBhY2s6Ly9zbGVhY3QtdHMtZnJvbnQvLi9wYWdlcy9EaXJlY3RNZXNzYWdlL3N0eWxlcy50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vcGFnZXMvRGlyZWN0TWVzc2FnZS9pbmRleC50c3giLCJ3ZWJwYWNrOi8vc2xlYWN0LXRzLWZyb250Ly4vdXRpbHMvbWFrZVNlY3Rpb25zLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJztcbmltcG9ydCB7IE1lbnRpb25zSW5wdXQgfSBmcm9tICdyZWFjdC1tZW50aW9ucyc7XG5cbmV4cG9ydCBjb25zdCBDaGF0QXJlYSA9IHN0eWxlZC5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIHdpZHRoOiAxMDAlO1xuICBwYWRkaW5nOiAyMHB4O1xuICBwYWRkaW5nLXRvcDogMDtcbmA7XG5cbmV4cG9ydCBjb25zdCBGb3JtID0gc3R5bGVkLmZvcm1gXG4gIGNvbG9yOiByZ2IoMjksIDI4LCAyOSk7XG4gIGZvbnQtc2l6ZTogMTVweDtcbiAgd2lkdGg6IDEwMCU7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgYm9yZGVyOiAxcHggc29saWQgcmdiKDI5LCAyOCwgMjkpO1xuYDtcblxuZXhwb3J0IGNvbnN0IE1lbnRpb25zVGV4dGFyZWEgPSBzdHlsZWQoTWVudGlvbnNJbnB1dClgXG4gIGZvbnQtZmFtaWx5OiBTbGFjay1MYXRvLCBhcHBsZUxvZ28sIHNhbnMtc2VyaWY7XG4gIGZvbnQtc2l6ZTogMTVweDtcbiAgcGFkZGluZzogOHB4IDlweDtcbiAgd2lkdGg6IDEwMCU7XG4gICYgc3Ryb25nIHtcbiAgICBiYWNrZ3JvdW5kOiBza3libHVlO1xuICB9XG4gICYgdGV4dGFyZWEge1xuICAgIGhlaWdodDogNDRweDtcbiAgICBwYWRkaW5nOiA5cHggMTBweCAhaW1wb3J0YW50O1xuICAgIG91dGxpbmU6IG5vbmUgIWltcG9ydGFudDtcbiAgICBib3JkZXItcmFkaXVzOiA0cHggIWltcG9ydGFudDtcbiAgICByZXNpemU6IG5vbmUgIWltcG9ydGFudDtcbiAgICBsaW5lLWhlaWdodDogMjJweDtcbiAgICBib3JkZXI6IG5vbmU7XG4gIH1cbiAgJiB1bCB7XG4gICAgYm9yZGVyOiAxcHggc29saWQgbGlnaHRncmF5O1xuICAgIG1heC1oZWlnaHQ6IDIwMHB4O1xuICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgcGFkZGluZzogOXB4IDEwcHg7XG4gICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIHdpZHRoOiAxNTBweDtcbiAgfVxuYDtcblxuZXhwb3J0IGNvbnN0IFRvb2xib3ggPSBzdHlsZWQuZGl2YFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJhY2tncm91bmQ6IHJnYigyNDgsIDI0OCwgMjQ4KTtcbiAgaGVpZ2h0OiA0MXB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBib3JkZXItdG9wOiAxcHggc29saWQgcmdiKDIyMSwgMjIxLCAyMjEpO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA0cHg7XG4gIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA0cHg7XG5gO1xuXG5leHBvcnQgY29uc3QgU2VuZEJ1dHRvbiA9IHN0eWxlZC5idXR0b25gXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6IDVweDtcbiAgdG9wOiA1cHg7XG5gO1xuXG5leHBvcnQgY29uc3QgRWFjaE1lbnRpb24gPSBzdHlsZWQuYnV0dG9uPHsgZm9jdXM6IGJvb2xlYW4gfT5gXG4gIHBhZGRpbmc6IDRweCAyMHB4O1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgYm9yZGVyOiBub25lO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjb2xvcjogcmdiKDI4LCAyOSwgMjgpO1xuICB3aWR0aDogMTAwJTtcbiAgJiBpbWcge1xuICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICB9XG4gICR7KHsgZm9jdXMgfSkgPT5cbiAgICBmb2N1cyAmJlxuICAgIGBcbiAgICBiYWNrZ3JvdW5kOiAjMTI2NGEzO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgYH07XG5gO1xuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiwgVkZDIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQ2hhdEFyZWEsIEVhY2hNZW50aW9uLCBGb3JtLCBNZW50aW9uc1RleHRhcmVhLCBTZW5kQnV0dG9uLCBUb29sYm94IH0gZnJvbSAnLi9zdHlsZXMnO1xuaW1wb3J0IGF1dG9zaXplIGZyb20gJ2F1dG9zaXplJztcbmltcG9ydCB1c2VTV1IgZnJvbSAnc3dyJztcbmltcG9ydCB7IElVc2VyIH0gZnJvbSAnQHR5cGluZ3MvZGInO1xuaW1wb3J0IGZldGNoZXIgZnJvbSAnQHV0aWxzL2ZldGNoZXInO1xuaW1wb3J0IHsgdXNlUGFyYW1zIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcbmltcG9ydCB7IE1lbnRpb24sIFN1Z2dlc3Rpb25EYXRhSXRlbSB9IGZyb20gJ3JlYWN0LW1lbnRpb25zJztcbmltcG9ydCBncmF2YXRhciBmcm9tICdncmF2YXRhcic7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGNoYXQ6IHN0cmluZztcbiAgb25TdWJtaXRGb3JtOiAoZTogYW55KSA9PiB2b2lkO1xuICBvbkNoYW5nZUNoYXQ6IChlOiBhbnkpID0+IHZvaWQ7XG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xufVxuY29uc3QgQ2hhdEJveDogVkZDPFByb3BzPiA9ICh7IGNoYXQsIG9uU3VibWl0Rm9ybSwgb25DaGFuZ2VDaGF0LCBwbGFjZWhvbGRlciB9KSA9PiB7XG4gIC8vIOqzte2GteyggeycvOuhnCDsk7DsnbTripQgY29tcG9uZW5065Ok7J2AIOqwmeydtCDsgqzsmqntlbTspJjslbwg7ZWY6riwIOuVjOusuOyXkCBvblN1Ym1pdEZvcm3qsJnsnYDqsbDripQgcHJvcHProZwg7KCE64usXG4gIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB1c2VQYXJhbXM8eyB3b3Jrc3BhY2U6IHN0cmluZyB9PigpO1xuICBjb25zdCB7IGRhdGE6IHVzZXJEYXRhLCBlcnJvciwgbXV0YXRlIH0gPSB1c2VTV1I8SVVzZXIgfCBmYWxzZT4oJ2h0dHA6Ly9sb2NhbGhvc3Q6MzA5NS9hcGkvdXNlcnMnLCBmZXRjaGVyKTtcbiAgY29uc3QgeyBkYXRhOiBtZW1iZXJEYXRhIH0gPSB1c2VTV1I8SVVzZXJbXT4oXG4gICAgdXNlckRhdGEgPyBgaHR0cDovL2xvY2FsaG9zdDozMDk1L2FwaS93b3Jrc3BhY2VzLyR7d29ya3NwYWNlfS9tZW1iZXJzYCA6IG51bGwsXG4gICAgZmV0Y2hlcixcbiAgKTtcblxuICBjb25zdCB0ZXh0YXJlYVJlZiA9IHVzZVJlZjxIVE1MVGV4dEFyZWFFbGVtZW50PihudWxsKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodGV4dGFyZWFSZWYuY3VycmVudCkge1xuICAgICAgYXV0b3NpemUodGV4dGFyZWFSZWYuY3VycmVudCk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3Qgb25LZXlkb3duQ2hhdCA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgb25TdWJtaXRGb3JtKGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBbb25TdWJtaXRGb3JtXSxcbiAgKTtcblxuICBjb25zdCByZW5kZXJTdWdnZXN0aW9uID0gdXNlQ2FsbGJhY2soXG4gICAgKFxuICAgICAgc3VnZ2VzdGlvbjogU3VnZ2VzdGlvbkRhdGFJdGVtLFxuICAgICAgc2VhcmNoOiBzdHJpbmcsXG4gICAgICBoaWdobGlnaHRlZERpc3BsYXk6IFJlYWN0LlJlYWN0Tm9kZSxcbiAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICBmb2N1czogYm9vbGVhbixcbiAgICApOiBSZWFjdC5SZWFjdE5vZGUgPT4ge1xuICAgICAgaWYgKCFtZW1iZXJEYXRhKSByZXR1cm47XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8RWFjaE1lbnRpb24gZm9jdXM9e2ZvY3VzfT5cbiAgICAgICAgICA8aW1nXG4gICAgICAgICAgICBzcmM9e2dyYXZhdGFyLnVybChtZW1iZXJEYXRhW2luZGV4XS5lbWFpbCwgeyBzOiAnMjBweCcsIGQ6ICdyZXRybycgfSl9XG4gICAgICAgICAgICBhbHQ9e21lbWJlckRhdGFbaW5kZXhdLm5pY2tuYW1lfVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPHNwYW4+e2hpZ2hsaWdodGVkRGlzcGxheX08L3NwYW4+XG4gICAgICAgIDwvRWFjaE1lbnRpb24+XG4gICAgICApO1xuICAgIH0sXG4gICAgW21lbWJlckRhdGFdLFxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPENoYXRBcmVhPlxuICAgICAgPEZvcm0gb25TdWJtaXQ9e29uU3VibWl0Rm9ybX0+XG4gICAgICAgIDxNZW50aW9uc1RleHRhcmVhXG4gICAgICAgICAgdmFsdWU9e2NoYXR9XG4gICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlQ2hhdH1cbiAgICAgICAgICBvbktleURvd249e29uS2V5ZG93bkNoYXR9XG4gICAgICAgICAgaWQ9XCJlZGl0LWNoYXRcIlxuICAgICAgICAgIHBsYWNlaG9sZGVyPXtwbGFjZWhvbGRlcn1cbiAgICAgICAgICBpbnB1dFJlZj17dGV4dGFyZWFSZWZ9XG4gICAgICAgICAgYWxsb3dTdWdnZXN0aW9uc0Fib3ZlQ3Vyc29yXG4gICAgICAgID5cbiAgICAgICAgICA8TWVudGlvblxuICAgICAgICAgICAgYXBwZW5kU3BhY2VPbkFkZFxuICAgICAgICAgICAgdHJpZ2dlcj1cIkBcIlxuICAgICAgICAgICAgZGF0YT17bWVtYmVyRGF0YT8ubWFwKCh2KSA9PiAoeyBpZDogdi5pZCwgZGlzcGxheTogdi5uaWNrbmFtZSB9KSkgfHwgW119XG4gICAgICAgICAgICByZW5kZXJTdWdnZXN0aW9uPXtyZW5kZXJTdWdnZXN0aW9ufVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvTWVudGlvbnNUZXh0YXJlYT5cbiAgICAgICAgPFRvb2xib3g+XG4gICAgICAgICAgPFNlbmRCdXR0b24+67O064K06riwPC9TZW5kQnV0dG9uPlxuICAgICAgICA8L1Rvb2xib3g+XG4gICAgICA8L0Zvcm0+XG4gICAgPC9DaGF0QXJlYT5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENoYXRCb3g7XG4iLCJpbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5cbmV4cG9ydCBjb25zdCBDaGF0Wm9uZSA9IHN0eWxlZC5kaXZgXG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4OiAxO1xuYDtcblxuZXhwb3J0IGNvbnN0IFNlY3Rpb24gPSBzdHlsZWQuc2VjdGlvbmBcbiAgbWFyZ2luLXRvcDogMjBweDtcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7XG5gO1xuXG5leHBvcnQgY29uc3QgU3RpY2t5SGVhZGVyID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGZsZXg6IDE7XG4gIHdpZHRoOiAxMDAlO1xuICBwb3NpdGlvbjogc3RpY2t5O1xuICB0b3A6IDE0cHg7XG4gICYgYnV0dG9uIHtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBmb250LXNpemU6IDEzcHg7XG4gICAgaGVpZ2h0OiAyOHB4O1xuICAgIGxpbmUtaGVpZ2h0OiAyN3B4O1xuICAgIHBhZGRpbmc6IDAgMTZweDtcbiAgICB6LWluZGV4OiAyO1xuICAgIC0tc2FmLTA6IHJnYmEodmFyKC0tc2tfZm9yZWdyb3VuZF9sb3csIDI5LCAyOCwgMjkpLCAwLjEzKTtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tc2FmLTApLCAwIDFweCAzcHggMCByZ2JhKDAsIDAsIDAsIDAuMDgpO1xuICAgIGJvcmRlci1yYWRpdXM6IDI0cHg7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHRvcDogLTEzcHg7XG4gICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIG91dGxpbmU6IG5vbmU7XG4gIH1cbmA7XG4iLCJpbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5cbmV4cG9ydCBjb25zdCBDaGF0V3JhcHBlciA9IHN0eWxlZC5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIHBhZGRpbmc6IDhweCAyMHB4O1xuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiAjZWVlO1xuICB9XG4gICYgLmNoYXQtaW1nIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIHdpZHRoOiAzNnB4O1xuICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICYgaW1nIHtcbiAgICAgIHdpZHRoOiAzNnB4O1xuICAgICAgaGVpZ2h0OiAzNnB4O1xuICAgIH1cbiAgfVxuICAmIC5jaGF0LXRleHQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC13cmFwOiB3cmFwO1xuICAgIGZsZXg6IDE7XG4gICAgJiBwIHtcbiAgICAgIGZsZXg6IDAgMCAxMDAlO1xuICAgICAgbWFyZ2luOiAwO1xuICAgIH1cbiAgfVxuICAmIC5jaGF0LXVzZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleDogMCAwIDEwMCU7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAmID4gYiB7XG4gICAgICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgICB9XG4gICAgJiA+IHNwYW4ge1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgIH1cbiAgfVxuICAmIGEge1xuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICBjb2xvcjogZGVlcHNreWJsdWU7XG4gIH1cbmA7XG4iLCJpbXBvcnQgeyBJRE0sIElDaGF0LCBJVXNlciB9IGZyb20gJ0B0eXBpbmdzL2RiJztcbmltcG9ydCBSZWFjdCwgeyBWRkMsIHVzZU1lbW8sIG1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDaGF0V3JhcHBlciB9IGZyb20gJy4vc3R5bGVzJztcbmltcG9ydCBncmF2YXRhciBmcm9tICdncmF2YXRhcic7XG5pbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnO1xuaW1wb3J0IHJlZ2V4aWZ5U3RyaW5nIGZyb20gJ3JlZ2V4aWZ5LXN0cmluZyc7XG5pbXBvcnQgeyBMaW5rLCB1c2VQYXJhbXMgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgZGF0YTogSURNIHwgSUNoYXQ7XG59XG5jb25zdCBDaGF0OiBWRkM8UHJvcHM+ID0gKHsgZGF0YSB9KSA9PiB7XG4gIGNvbnN0IHVzZXI6IElVc2VyID0gJ1NlbmRlcicgaW4gZGF0YSA/IGRhdGEuU2VuZGVyIDogZGF0YS5Vc2VyO1xuICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdXNlUGFyYW1zPHsgd29ya3NwYWNlOiBzdHJpbmcgfT4oKTtcblxuICBjb25zdCByZXN1bHQgPSB1c2VNZW1vPChzdHJpbmcgfCBKU1guRWxlbWVudClbXSB8IEpTWC5FbGVtZW50PihcbiAgICAoKSA9PlxuICAgICAgZGF0YS5jb250ZW50LnN0YXJ0c1dpdGgoJ3VwbG9hZHNcXFxcJykgfHwgZGF0YS5jb250ZW50LnN0YXJ0c1dpdGgoJ3VwbG9hZHMvJykgPyAoXG4gICAgICAgIDxpbWcgc3JjPXtgaHR0cDovL2xvY2FsaG9zdDozMDk1LyR7ZGF0YS5jb250ZW50fWB9IHN0eWxlPXt7IG1heEhlaWdodDogMjAwIH19IC8+XG4gICAgICApIDogKFxuICAgICAgICByZWdleGlmeVN0cmluZyh7XG4gICAgICAgICAgaW5wdXQ6IGRhdGEuY29udGVudCxcbiAgICAgICAgICBwYXR0ZXJuOiAvQFxcWyguKz8pXVxcKChcXGQrPylcXCl8XFxuL2csXG4gICAgICAgICAgZGVjb3JhdG9yKG1hdGNoLCBpbmRleCkge1xuICAgICAgICAgICAgY29uc3QgYXJyOiBzdHJpbmdbXSB8IG51bGwgPSBtYXRjaC5tYXRjaCgvQFxcWyguKz8pXVxcKChcXGQrPylcXCkvKSE7XG4gICAgICAgICAgICBpZiAoYXJyKSB7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPExpbmsga2V5PXttYXRjaCArIGluZGV4fSB0bz17YC93b3Jrc3BhY2UvJHt3b3Jrc3BhY2V9L2RtLyR7YXJyWzJdfWB9PlxuICAgICAgICAgICAgICAgICAgQHthcnJbMV19XG4gICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDxiciBrZXk9e2luZGV4fSAvPjtcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgKSxcbiAgICBbd29ya3NwYWNlLCBkYXRhLmNvbnRlbnRdLFxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPENoYXRXcmFwcGVyPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaGF0LWltZ1wiPlxuICAgICAgICA8aW1nIHNyYz17Z3JhdmF0YXIudXJsKHVzZXIuZW1haWwsIHsgczogJzM2cHgnLCBkOiAncmV0cm8nIH0pfSBhbHQ9e3VzZXIubmlja25hbWV9IC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hhdC10ZXh0XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hhdC11c2VyXCI+XG4gICAgICAgICAgPGI+e3VzZXIubmlja25hbWV9PC9iPlxuICAgICAgICAgIDxzcGFuPntkYXlqcyhkYXRhLmNyZWF0ZWRBdCkuZm9ybWF0KCc6aDptbSBBJyl9PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHA+e3Jlc3VsdH08L3A+XG4gICAgICA8L2Rpdj5cbiAgICA8L0NoYXRXcmFwcGVyPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbWVtbyhDaGF0KTtcbiIsImltcG9ydCB7IENoYXRab25lLCBTZWN0aW9uLCBTdGlja3lIZWFkZXIgfSBmcm9tICcuL3N0eWxlcyc7XG5pbXBvcnQgUmVhY3QsIHsgUmVmT2JqZWN0LCB1c2VDYWxsYmFjaywgdXNlUmVmLCBWRkMgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBJRE0sIElDaGF0IH0gZnJvbSAnQHR5cGluZ3MvZGInO1xuaW1wb3J0IENoYXQgZnJvbSAnQGNvbXBvbmVudHMvQ2hhdCc7XG5pbXBvcnQgeyBTY3JvbGxiYXJzIH0gZnJvbSAncmVhY3QtY3VzdG9tLXNjcm9sbGJhcnMtMic7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGNoYXREYXRhOiB7IFtrZXk6IHN0cmluZ106IChJRE0gfCBJQ2hhdClbXSB9O1xuICBzY3JvbGxiYXJSZWY6IFJlZk9iamVjdDxTY3JvbGxiYXJzPjtcbiAgaXNSZWFjaGluZ0VuZD86IGJvb2xlYW47XG4gIGlzRW1wdHk6IGJvb2xlYW47XG4gIHNldFNpemU6IChmOiAoc2l6ZTogbnVtYmVyKSA9PiBudW1iZXIpID0+IFByb21pc2U8KElETSB8IElDaGF0KVtdW10gfCB1bmRlZmluZWQ+O1xufVxuY29uc3QgQ2hhdExpc3Q6IFZGQzxQcm9wcz4gPSAoeyBzY3JvbGxiYXJSZWYsIGlzUmVhY2hpbmdFbmQsIGlzRW1wdHksIGNoYXREYXRhLCBzZXRTaXplIH0pID0+IHtcbiAgY29uc3Qgb25TY3JvbGwgPSB1c2VDYWxsYmFjayhcbiAgICAodmFsdWVzKSA9PiB7XG4gICAgICAvLyDrp6gg7JyE7JeQIOuPhOuLrCDtlZjsmIDqs6AsICAgICAgICAgICDrp4jsp4Drp4kg7Y6Y7J207KeA6rCAIOyVhOuLiOqzoCAg642w7J207YSw6rCAIOuBneydtCDslYTri5DrlYxcbiAgICAgIGlmICh2YWx1ZXMuc2Nyb2xsVG9wID09PSAwICYmICFpc1JlYWNoaW5nRW5kICYmICFpc0VtcHR5KSB7XG4gICAgICAgIHNldFNpemUoKHNpemUpID0+IHNpemUgKyAxKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBzY3JvbGxiYXJSZWYuY3VycmVudD8uc2Nyb2xsVG9wKHNjcm9sbGJhclJlZi5jdXJyZW50Py5nZXRTY3JvbGxIZWlnaHQoKSAtIHZhbHVlcy5zY3JvbGxIZWlnaHQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtzY3JvbGxiYXJSZWZdLFxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPENoYXRab25lPlxuICAgICAgPFNjcm9sbGJhcnMgYXV0b0hpZGUgcmVmPXtzY3JvbGxiYXJSZWZ9IG9uU2Nyb2xsRnJhbWU9e29uU2Nyb2xsfT5cbiAgICAgICAge09iamVjdC5lbnRyaWVzKGNoYXREYXRhKS5tYXAoKFtkYXRlLCBjaGF0c10pID0+IHtcbiAgICAgICAgICAvL+qwneyytOydmCDrsJjrs7XrrLjsnYAgT2JqZWN0cy5lbnRyaWVz66GcIO2VnOuLpFxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8U2VjdGlvbiBjbGFzc05hbWU9e2BzZWN0aW9uLSR7ZGF0ZX1gfSBrZXk9e2RhdGV9PlxuICAgICAgICAgICAgICA8U3RpY2t5SGVhZGVyPlxuICAgICAgICAgICAgICAgIDxidXR0b24+e2RhdGV9PC9idXR0b24+XG4gICAgICAgICAgICAgIDwvU3RpY2t5SGVhZGVyPlxuICAgICAgICAgICAgICB7Y2hhdHMubWFwKChjaGF0KSA9PiAoXG4gICAgICAgICAgICAgICAgPENoYXQga2V5PXtjaGF0LmlkfSBkYXRhPXtjaGF0fSAvPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvU2VjdGlvbj5cbiAgICAgICAgICApO1xuICAgICAgICB9KX1cbiAgICAgIDwvU2Nyb2xsYmFycz5cbiAgICA8L0NoYXRab25lPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2hhdExpc3Q7XG4iLCJpbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5cbmV4cG9ydCBjb25zdCBDb250YWluZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LXdyYXA6IHdyYXA7XG4gIGhlaWdodDogY2FsYygxMDB2aCAtIDM4cHgpO1xuICBmbGV4LWZsb3c6IGNvbHVtbjtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuYDtcblxuZXhwb3J0IGNvbnN0IEhlYWRlciA9IHN0eWxlZC5oZWFkZXJgXG4gIGhlaWdodDogNjRweDtcbiAgZGlzcGxheTogZmxleDtcbiAgd2lkdGg6IDEwMCU7XG4gIC0tc2FmLTA6IHJnYmEodmFyKC0tc2tfZm9yZWdyb3VuZF9sb3csIDI5LCAyOCwgMjkpLCAwLjEzKTtcbiAgYm94LXNoYWRvdzogMCAxcHggMCB2YXIoLS1zYWYtMCk7XG4gIHBhZGRpbmc6IDIwcHggMTZweCAyMHB4IDIwcHg7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAmIGltZyB7XG4gICAgbWFyZ2luLXJpZ2h0OiA1cHg7XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBEcmFnT3ZlciA9IHN0eWxlZC5kaXZgXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA2NHB4O1xuICBsZWZ0OiAwO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiBjYWxjKDEwMCUgLSA2NHB4KTtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG4gIG9wYWNpdHk6IDAuNztcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGZvbnQtc2l6ZTogNDBweDtcbmA7XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVBhcmFtcyB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5pbXBvcnQgeyBDb250YWluZXIsIERyYWdPdmVyLCBIZWFkZXIgfSBmcm9tICcuL3N0eWxlcyc7XG5pbXBvcnQgZ3JhdmF0YXIgZnJvbSAnZ3JhdmF0YXInO1xuaW1wb3J0IHVzZVNXUiBmcm9tICdzd3InO1xuaW1wb3J0IHVzZVNXUkluZmluaXRlIGZyb20gJ3N3ci9pbmZpbml0ZSc7XG5pbXBvcnQgZmV0Y2hlciBmcm9tICdAdXRpbHMvZmV0Y2hlcic7XG5pbXBvcnQgQ2hhdEJveCBmcm9tICdAY29tcG9uZW50cy9DaGF0Qm94JztcbmltcG9ydCBDaGF0TGlzdCBmcm9tICdAY29tcG9uZW50cy9DaGF0TGlzdCc7XG5pbXBvcnQgdXNlSW5wdXQgZnJvbSAnQGhvb2tzL3VzZUlucHV0JztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgeyBJRE0gfSBmcm9tICdAdHlwaW5ncy9kYic7XG5pbXBvcnQgbWFrZVNlY3Rpb24gZnJvbSAnQHV0aWxzL21ha2VTZWN0aW9ucyc7XG5pbXBvcnQgdXNlU29ja2V0IGZyb20gJ0Bob29rcy91c2VTb2NrZXQnO1xuaW1wb3J0IHsgU2Nyb2xsYmFycyB9IGZyb20gJ3JlYWN0LWN1c3RvbS1zY3JvbGxiYXJzLTInO1xuaW1wb3J0IHsgdG9hc3QsIFRvYXN0Q29udGFpbmVyIH0gZnJvbSAncmVhY3QtdG9hc3RpZnknO1xuaW1wb3J0ICdyZWFjdC10b2FzdGlmeS9kaXN0L1JlYWN0VG9hc3RpZnkuY3NzJztcblxuY29uc3QgRGlyZWN0TWVzc2FnZSA9ICgpID0+IHtcbiAgY29uc3QgeyB3b3Jrc3BhY2UsIGlkIH0gPSB1c2VQYXJhbXM8eyB3b3Jrc3BhY2U6IHN0cmluZzsgaWQ6IHN0cmluZyB9PigpO1xuICBjb25zdCB7IGRhdGE6IHVzZXJEYXRhIH0gPSB1c2VTV1IoYGh0dHA6Ly9sb2NhbGhvc3Q6MzA5NS9hcGkvd29ya3NwYWNlcy8ke3dvcmtzcGFjZX0vbWVtYmVycy8ke2lkfWAsIGZldGNoZXIpO1xuICBjb25zdCB7IGRhdGE6IG15RGF0YSB9ID0gdXNlU1dSKGBodHRwOi8vbG9jYWxob3N0OjMwOTUvYXBpL3VzZXJzYCwgZmV0Y2hlcik7XG4gIGNvbnN0IHtcbiAgICBkYXRhOiBjaGF0RGF0YSxcbiAgICBtdXRhdGU6IG11dGF0ZUNoYXQsXG4gICAgc2V0U2l6ZSxcbiAgfSA9IHVzZVNXUkluZmluaXRlPElETVtdPihcbiAgICAoaW5kZXgpID0+IGBodHRwOi8vbG9jYWxob3N0OjMwOTUvYXBpL3dvcmtzcGFjZXMvJHt3b3Jrc3BhY2V9L2Rtcy8ke2lkfS9jaGF0cz9wZXJQYWdlPTIwJnBhZ2U9JHtpbmRleCArIDF9YCxcbiAgICBmZXRjaGVyLFxuICApO1xuXG4gIGNvbnN0IFtvbkRyYWdlT3Zlciwgc2V0T25EcmFnT3Zlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjaGF0LCBvbkNoYW5nZUNoYXQsIHNldENoYXRdID0gdXNlSW5wdXQoJycpO1xuICBjb25zdCBzY3JvbGxiYXJSZWYgPSB1c2VSZWY8U2Nyb2xsYmFycz4obnVsbCk7XG5cbiAgLy/snbTsoJwg642w7J207YSw6rCAIOydtOywqOybkCDrsLDsl7TroZwg65Ok7Ja07Ji0IFtbM3BhZ2VdICxbMnBhZ2VdLCBbMXBhZ2VdXSDrgpjspJHsl5Ag65Ok7Ja07Jio6rKMIOyVnuycvOuhnCDsoIDsnqXrkKgg6re4656Y7IScIFswXS5sZW5ndGg9PT0wIOyduOyngCDtmZXsnbjtlZjripTqsbDsnoRcbiAgY29uc3QgaXNFbXB0eSA9IGNoYXREYXRhPy5bMF0/Lmxlbmd0aCA9PT0gMDsgLy/rjbDsnbTthLDqsIAg642U7J207IOBIOyXhuuKlOqwgD9cbiAgY29uc3QgaXNSZWFjaGluZ0VuZCA9IGlzRW1wdHkgfHwgKGNoYXREYXRhICYmIGNoYXREYXRhW2NoYXREYXRhLmxlbmd0aCAtIDFdPy5sZW5ndGggPCAyMCk7IC8v66eI7KeA66eJIO2OmOydtOyngOyduOqwgD9cblxuICBjb25zdCBvblN1Ym1pdEZvcm0gPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBpZiAoY2hhdD8udHJpbSgpKSB7XG4gICAgICAgIGF4aW9zXG4gICAgICAgICAgLnBvc3QoYGh0dHA6Ly9sb2NhbGhvc3Q6MzA5NS9hcGkvd29ya3NwYWNlcy8ke3dvcmtzcGFjZX0vZG1zLyR7aWR9L2NoYXRzYCwge1xuICAgICAgICAgICAgY29udGVudDogY2hhdCxcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIG11dGF0ZUNoYXQoKTtcbiAgICAgICAgICAgIHNldENoYXQoJycpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYCR7d29ya3NwYWNlfS0ke2lkfWAsIG5ldyBEYXRlKCkuZ2V0VGltZSgpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIHNjcm9sbGJhclJlZi5jdXJyZW50Py5zY3JvbGxUb0JvdHRvbSgpO1xuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtjaGF0XSxcbiAgKTtcblxuICBjb25zb2xlLmxvZyhjaGF0RGF0YSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgJHt3b3Jrc3BhY2V9LSR7aWR9YCwgbmV3IERhdGUoKS5nZXRUaW1lKCkudG9TdHJpbmcoKSk7XG4gIH0sIFt3b3Jrc3BhY2UsIGlkXSk7XG4gIGNvbnN0IFtzb2NrZXRdID0gdXNlU29ja2V0KHdvcmtzcGFjZSk7XG5cbiAgLy9tdXRhdGUo7IOI66Gc7Jq06rCSLCBmYWxzZSlcbiAgLy9mYWxzZe2VmOuptCDshJzrsoTsl5Ag6rKA7IKs7JWI7ZWoIHRydWXroZwg7ZWY66m0IOq4sOyhtCByZXZhbGlkYXRl7JmAIHNhbWVcbiAgLy9zb2NrZXTsnLzroZwg642w7J207YSwIOqwgOyguOyZk+ycvOuvgOuhnCBtdXRhdGXrpbwgZmFsc2XroZztlbTshJwg65GQ67KIIOqygOyCrOqwgCDsnbTro6jslrTsp4Dsp4Ag7JWK6riw66GcIO2VnOuLpFxuICBjb25zdCBvbk1lc3NhZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0YTogYW55KSA9PiB7XG4gICAgICBtdXRhdGVDaGF0KChjaGF0RGF0YSkgPT4ge1xuICAgICAgICBjaGF0RGF0YT8uWzBdLnB1c2goZGF0YSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGAke3dvcmtzcGFjZX0tJHtpZH1gLCBuZXcgRGF0ZSgpLmdldFRpbWUoKS50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuIGNoYXREYXRhOyAvL+ybkOuemCDqsJLsnbQg65Ok7Ja06rCA7JW87ZWY64qU642wIO2VqOyImCDrk6TslrTqsJTsnLzri4ggcmV0dXJuIO2VtOyjvOyWtOyVvOqyn+yngD9cbiAgICAgIH0sIGZhbHNlKS50aGVuKCgpID0+IHtcbiAgICAgICAgdG9hc3Quc3VjY2Vzcygn7IOIIOuplOyLnOyngOqwgCDrj4TssKntlojsirXri4jri6QuJywge1xuICAgICAgICAgIG9uQ2xpY2soKSB7XG4gICAgICAgICAgICBzY3JvbGxiYXJSZWYuY3VycmVudD8uc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNsb3NlT25DbGljazogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtpZCwgbXlEYXRhLCBtdXRhdGVDaGF0XSxcbiAgKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIG9u7JeQ7ISgIOydtOuypO2KuCDsnbTrpoQsIGNhbGxiYWNrIO2VqOyImFxuICAgIHNvY2tldD8ub24oJ2RtJywgb25NZXNzYWdlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc29ja2V0Py5vZmYoJ2RtJywgb25NZXNzYWdlKTtcbiAgICB9O1xuICB9LCBbc29ja2V0LCBvbk1lc3NhZ2VdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjaGF0RGF0YT8ubGVuZ3RoID09PSAxKSB7XG4gICAgICBzY3JvbGxiYXJSZWYuY3VycmVudD8uc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICB9XG4gIH0sIFtjaGF0RGF0YV0pO1xuXG4gIC8vIOyngOq4iOuNsOydtO2EsOqwgCBbIFvsoJzsnbzstZzqt7zqurx+7LWc6re86rq8XSBb7Jik656Y65Cc6rGwfuygnOydvOyYpOuemOuQnOqxsF0gXSDsnbTrn7Ag7Iic7Jy866GcIOuQmOyWtOyeiOuLpC5cbiAgLy8g7KCc7J287LWc6re86rq86rCAIOuwkeyXkOuztOydtOugpOuptCDrsLDsl7TsnYQgcmV2ZXJzZeyLnOy8nOyEnCDsnITsl5DshJzripQg7LWc6re86rq8IH4g7JWE656Y7IScIOygnOydvCDstZzqt7zqurwg7Iic7Jy866GcIOuztOyXrOyjvOyWtOyVvO2VnOuLpFxuICAvL3JldmVyc2UoKe2VmOuptCDquLDsobTsnZggY2hhdOydtCDrs4Dqsr3rkJjquLAg65WM66y47JeQIOq4sOyhtOydmCBjaGF0RGF0Yeu2iOuzgOyEsSDsp4DtgqTquLBcblxuICBjb25zdCBjaGF0U2VjdGlvbnMgPSBtYWtlU2VjdGlvbihjaGF0RGF0YSA/IChbXSBhcyBJRE1bXSkuY29uY2F0KC4uLmNoYXREYXRhKS5yZXZlcnNlKCkgOiBbXSk7XG5cbiAgY29uc3Qgb25Ecm9wID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgIC8vYnJvd3NlcuuniOuLpCBpdGVtc+uCmCBmaWxlc+yXkCDri7TquYBcbiAgICAgIGlmIChlLmRhdGFUcmFuc2Zlci5pdGVtcykge1xuICAgICAgICAvLyBkYXRhVHJhbnNmZXIuaXRlbXPsl5Ag64u06ri06rK97JqwXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZS5kYXRhVHJhbnNmZXIuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoZS5kYXRhVHJhbnNmZXIuaXRlbXNbaV0ua2luZCA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gZS5kYXRhVHJhbnNmZXIuaXRlbXNbaV0uZ2V0QXNGaWxlKCk7XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ltYWdlJywgZmlsZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBkYXRhVHJhbnNmZXIuZmlsZXPsl5Ag64u06ri06rK97JqwXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZS5kYXRhVHJhbnNmZXIuZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ltYWdlJywgZS5kYXRhVHJhbnNmZXIuZmlsZXNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBheGlvcy5wb3N0KGBodHRwOi8vbG9jYWxob3N0OjMwOTUvYXBpL3dvcmtzcGFjZXMvJHt3b3Jrc3BhY2V9L2Rtcy8ke2lkfS9pbWFnZXNgLCBmb3JtRGF0YSkudGhlbigoKSA9PiB7XG4gICAgICAgIHNldE9uRHJhZ092ZXIoZmFsc2UpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgJHt3b3Jrc3BhY2V9LSR7aWR9YCwgbmV3IERhdGUoKS5nZXRUaW1lKCkudG9TdHJpbmcoKSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFt3b3Jrc3BhY2UsIGlkXSxcbiAgKTtcblxuICBjb25zdCBvbkRyYWdPdmVyID0gdXNlQ2FsbGJhY2soKGUpID0+IHtcbiAgICBjb25zb2xlLmxvZygn65Oc656Y6re47KSRJyk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNldE9uRHJhZ092ZXIodHJ1ZSk7XG4gIH0sIFtdKTtcblxuICBpZiAoIXVzZXJEYXRhIHx8ICFteURhdGEpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gKFxuICAgIDxDb250YWluZXIgb25EcmFnT3Zlcj17b25EcmFnT3Zlcn0gb25Ecm9wPXtvbkRyb3B9PlxuICAgICAgPEhlYWRlcj5cbiAgICAgICAgPGltZyBzcmM9e2dyYXZhdGFyLnVybCh1c2VyRGF0YS5lbWFpbCwgeyBzOiAnMjRweCcsIGQ6ICdyZXRybycgfSl9IGFsdD17dXNlckRhdGEubmlja25hbWV9IC8+XG4gICAgICAgIDxzcGFuPnt1c2VyRGF0YS5uaWNrbmFtZX08L3NwYW4+XG4gICAgICA8L0hlYWRlcj5cbiAgICAgIDxDaGF0TGlzdFxuICAgICAgICBjaGF0RGF0YT17Y2hhdFNlY3Rpb25zfVxuICAgICAgICBzY3JvbGxiYXJSZWY9e3Njcm9sbGJhclJlZn1cbiAgICAgICAgaXNSZWFjaGluZ0VuZD17aXNSZWFjaGluZ0VuZH1cbiAgICAgICAgaXNFbXB0eT17aXNFbXB0eX1cbiAgICAgICAgc2V0U2l6ZT17c2V0U2l6ZX1cbiAgICAgIC8+XG4gICAgICA8VG9hc3RDb250YWluZXIgcG9zaXRpb249XCJib3R0b20tY2VudGVyXCIgbGltaXQ9ezF9IC8+XG4gICAgICA8Q2hhdEJveCBjaGF0PXtjaGF0fSBvbkNoYW5nZUNoYXQ9e29uQ2hhbmdlQ2hhdH0gb25TdWJtaXRGb3JtPXtvblN1Ym1pdEZvcm19IC8+XG4gICAgICB7b25EcmFnZU92ZXIgJiYgPERyYWdPdmVyPuyXheuhnOuTnCE8L0RyYWdPdmVyPn1cbiAgICA8L0NvbnRhaW5lcj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IERpcmVjdE1lc3NhZ2U7XG4iLCJpbXBvcnQgeyBJQ2hhdCwgSURNIH0gZnJvbSAnQHR5cGluZ3MvZGInO1xuaW1wb3J0IGRheWpzIGZyb20gJ2RheWpzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWFrZVNlY3Rpb248VCBleHRlbmRzIElETSB8IElDaGF0PihjaGF0TGlzdDogVFtdKSB7XG4gIGNvbnN0IHNlY3Rpb25zOiB7IFtrZXk6IHN0cmluZ106IFRbXSB9ID0ge307XG4gIGNoYXRMaXN0LmZvckVhY2goKGNoYXQpID0+IHtcbiAgICBjb25zdCBtb250aERhdGUgPSBkYXlqcyhjaGF0LmNyZWF0ZWRBdCkuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc2VjdGlvbnNbbW9udGhEYXRlXSkpIHtcbiAgICAgIHNlY3Rpb25zW21vbnRoRGF0ZV0ucHVzaChjaGF0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VjdGlvbnNbbW9udGhEYXRlXSA9IFtjaGF0XTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gc2VjdGlvbnM7XG59XG4iXSwibmFtZXMiOlsiQ2hhdEFyZWEiLCJzdHlsZWQiLCJGb3JtIiwiTWVudGlvbnNUZXh0YXJlYSIsIk1lbnRpb25zSW5wdXQiLCJUb29sYm94IiwiU2VuZEJ1dHRvbiIsIkVhY2hNZW50aW9uIiwiZm9jdXMiLCJjaGF0Iiwib25TdWJtaXRGb3JtIiwib25DaGFuZ2VDaGF0IiwicGxhY2Vob2xkZXIiLCJ3b3Jrc3BhY2UiLCJ1c2VQYXJhbXMiLCJ1c2VTV1IiLCJmZXRjaGVyIiwidXNlckRhdGEiLCJkYXRhIiwibWVtYmVyRGF0YSIsImVycm9yIiwibXV0YXRlIiwidGV4dGFyZWFSZWYiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJjdXJyZW50IiwiYXV0b3NpemUiLCJvbktleWRvd25DaGF0IiwidXNlQ2FsbGJhY2siLCJlIiwia2V5IiwicHJldmVudERlZmF1bHQiLCJzaGlmdEtleSIsInJlbmRlclN1Z2dlc3Rpb24iLCJzdWdnZXN0aW9uIiwic2VhcmNoIiwiaGlnaGxpZ2h0ZWREaXNwbGF5IiwiaW5kZXgiLCJzcmMiLCJncmF2YXRhciIsImVtYWlsIiwicyIsImQiLCJhbHQiLCJuaWNrbmFtZSIsIm9uU3VibWl0IiwidmFsdWUiLCJvbkNoYW5nZSIsIm9uS2V5RG93biIsImlkIiwiaW5wdXRSZWYiLCJhbGxvd1N1Z2dlc3Rpb25zQWJvdmVDdXJzb3IiLCJhcHBlbmRTcGFjZU9uQWRkIiwidHJpZ2dlciIsIm1hcCIsInYiLCJkaXNwbGF5IiwiQ2hhdFpvbmUiLCJTZWN0aW9uIiwiU3RpY2t5SGVhZGVyIiwiQ2hhdFdyYXBwZXIiLCJDaGF0IiwidXNlciIsIlNlbmRlciIsIlVzZXIiLCJyZXN1bHQiLCJ1c2VNZW1vIiwiY29udGVudCIsInN0YXJ0c1dpdGgiLCJzdHlsZSIsIm1heEhlaWdodCIsInJlZ2V4aWZ5U3RyaW5nIiwiaW5wdXQiLCJwYXR0ZXJuIiwiZGVjb3JhdG9yIiwibWF0Y2giLCJhcnIiLCJ0byIsImNsYXNzTmFtZSIsImRheWpzIiwiY3JlYXRlZEF0IiwiZm9ybWF0IiwibWVtbyIsInNjcm9sbGJhclJlZiIsImlzUmVhY2hpbmdFbmQiLCJpc0VtcHR5IiwiY2hhdERhdGEiLCJzZXRTaXplIiwib25TY3JvbGwiLCJ2YWx1ZXMiLCJzY3JvbGxUb3AiLCJzaXplIiwidGhlbiIsImdldFNjcm9sbEhlaWdodCIsInNjcm9sbEhlaWdodCIsImF1dG9IaWRlIiwicmVmIiwib25TY3JvbGxGcmFtZSIsIk9iamVjdCIsImVudHJpZXMiLCJkYXRlIiwiY2hhdHMiLCJDb250YWluZXIiLCJIZWFkZXIiLCJEcmFnT3ZlciIsIm15RGF0YSIsInVzZVNXUkluZmluaXRlIiwibXV0YXRlQ2hhdCIsInVzZVN0YXRlIiwib25EcmFnZU92ZXIiLCJzZXRPbkRyYWdPdmVyIiwidXNlSW5wdXQiLCJzZXRDaGF0IiwibGVuZ3RoIiwidHJpbSIsImF4aW9zIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkRhdGUiLCJnZXRUaW1lIiwidG9TdHJpbmciLCJzZXRUaW1lb3V0Iiwic2Nyb2xsVG9Cb3R0b20iLCJjYXRjaCIsImNvbnNvbGUiLCJsb2ciLCJzb2NrZXQiLCJ1c2VTb2NrZXQiLCJvbk1lc3NhZ2UiLCJwdXNoIiwidG9hc3QiLCJvbkNsaWNrIiwiY2xvc2VPbkNsaWNrIiwib24iLCJvZmYiLCJjaGF0U2VjdGlvbnMiLCJtYWtlU2VjdGlvbiIsImNvbmNhdCIsInJldmVyc2UiLCJvbkRyb3AiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiZGF0YVRyYW5zZmVyIiwiaXRlbXMiLCJpIiwia2luZCIsImZpbGUiLCJnZXRBc0ZpbGUiLCJhcHBlbmQiLCJmaWxlcyIsIm9uRHJhZ092ZXIiLCJDaGF0TGlzdCIsInBvc2l0aW9uIiwibGltaXQiLCJDaGF0Qm94IiwiY2hhdExpc3QiLCJzZWN0aW9ucyIsImZvckVhY2giLCJtb250aERhdGUiLCJBcnJheSIsImlzQXJyYXkiXSwic291cmNlUm9vdCI6IiJ9